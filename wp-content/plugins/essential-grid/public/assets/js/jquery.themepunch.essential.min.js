

/************************************************************************************
 * jquery.themepunch.essential.js - jQuery Plugin for esg Portfolio Slider
 * @version: 1.5.4 (20.11.2014)
 * @requires jQuery v1.7 or later (tested on 1.9)
 * @author ThemePunch
************************************************************************************/
//! ++++++++++++++++++++++++++++++++++++++

(function(jQuery,undefined){function checkAvailableFilters(e,t){}function checkMoreToLoad(e,t){var n=new Array;jQuery(t.filterGroupClass+".esg-filter-wrapper .esg-filterbutton.selected, "+t.filterGroupClass+" .esg-filter-wrapper .esg-filterbutton.selected").each(function(){n.push(jQuery(this).data("fid"))});if(jQuery(t.filterGroupClass+".esg-filter-wrapper .esg-filterbutton.selected, "+t.filterGroupClass+" .esg-filter-wrapper .esg-filterbutton.selected").length==0)n.push(-1);var r=new Array;for(var i=0;i<t.loadMoreItems.length;i++){jQuery.each(t.loadMoreItems[i][1],function(e,s){jQuery.each(n,function(e,n){if(n==s&&t.loadMoreItems[i][0]!=-1)r.push(t.loadMoreItems[i])})})}return r}function buildLoader(e,t){if(e.find(".esg-loader").length>0)return false;e.append('<div class="esg-loader '+t.spinner+'">'+'<div class="dot1"></div>'+'<div class="dot2"></div>'+'<div class="punchgs.Bounce1"></div>'+'<div class="punchgs.Bounce2"></div>'+'<div class="punchgs.Bounce3"></div>'+"</div>");if(t.spinner=="spinner1"||t.spinner=="spinner2")e.find(".esg-loader").css({backgroundColor:t.spinnerColor});if(t.spinner=="spinner3"||t.spinner=="spinner4")e.find(".punchgs.Bounce1, .punchgs.Bounce2, .punchgs.Bounce3, .dot1, .dot2").css({backgroundColor:t.spinnerColor});punchgs.TweenLite.to(e,.3,{minHeight:"100px",zIndex:0})}function setKeyToNull(e,t){jQuery.each(e.loadMoreItems,function(n,r){if(r[0]==t)e.loadMoreItems[n][0]=-1})}function loadMoreEmpty(e){var t=true;for(var n=0;n<e.loadMoreItems.length;n++){if(e.loadMoreItems[n][0]!=-1)t=false}return t}function loadMoreItems(e,t){var n=checkMoreToLoad(e,t);var r=new Array;jQuery.each(n,function(e,n){if(r.length<t.loadMoreAmount){r.push(n[0]);setKeyToNull(t,n[0])}});var i=checkMoreToLoad(e,t).length;if(r.length>0){var s=e.find(".esg-loadmore");if(s.length>0){punchgs.TweenLite.to(s,.4,{autoAlpha:.2});s.data("loading",1)}var o={action:t.loadMoreAjaxAction,client_action:"load_more_items",token:t.loadMoreAjaxToken,data:r,gridid:t.gridID};jQuery.ajax({type:"post",url:t.loadMoreAjaxUrl,dataType:"json",data:o}).success(function(n,r,s){if(n.success){e.find("ul").first().append(n.data);checkAvailableFilters(e,t);prepareItemsInGrid(t,true);setItemsOnPages(t);setTimeout(function(){t.animDelay="off";organiseGrid(t);prepareSortingAndOrders(e);if(loadMoreEmpty(t))e.find(".esg-loadmore").remove();else{var n=e.find(".esg-loadmore"),r=t.loadMoreTxt+" ("+i+")";if(t.loadMoreNr=="off")r=t.loadMoreTxt;if(i==0)n.html(t.loadMoreEndTxt);else n.html(r);if(n.length>0){punchgs.TweenLite.to(n,.4,{autoAlpha:1,overwrite:"all"});n.data("loading",0)}}setTimeout(function(){t.animDelay="on"},500)},10)}}).error(function(t,n,r){e.find(".esg-loadmore").html("FAILURE: "+n)})}else{if(loadMoreEmpty(t)){e.find(".esg-loadmore").remove()}else{e.find(".esg-loadmore").html(t.loadMoreEndTxt)}}}function killOldCustomAjaxContent(e){var t=e.data("lastposttype"),n=e.data("oldajaxsource"),r=e.data("oldajaxtype"),i=e.data("oldajaxvideoaspect"),s=e.data("oldselector");if(t!=undefined&&t!=""){try{jQuery.each(jQuery.fn.tpessential.defaults.ajaxTypes,function(o,u){if(u!=undefined&&u.type!=undefined){if(u.type==t&&u.killfunc!=undefined)setTimeout(function(){if(u.killfunc.call(this,{id:n,type:r,aspectratio:i,selector:s})){e.empty()}},250)}})}catch(o){console.log(o)}}e.data("lastposttype","")}function addAjaxNavigagtion(e,t){function i(e){var t=new Array;jQuery.each(e,function(e,n){if(jQuery(n).closest(".itemtoshow.isvisiblenow").length>0)t.push(n)});return t}var n=" eg-acp-"+e.ajaxClosePosition;n=n+" eg-acp-"+e.ajaxCloseStyle,n=n+" eg-acp-"+e.ajaxCloseType,loc="eg-icon-left-open-1",roc="eg-icon-right-open-1",xoc='<i class="eg-icon-cancel"></i>';if(e.ajaxCloseType=="type1"){loc="eg-icon-left-open-big";roc="eg-icon-right-open-big";e.ajaxCloseTxt="";xoc="X"}if(e.ajaxCloseInner=="true"||e.ajaxCloseInner==true)n=n+" eg-acp-inner";var r='<div class="eg-ajax-closer-wrapper'+n+'">';if(e.ajaxClosePosition=="tr"||e.ajaxClosePosition=="br"){if(e.ajaxNavButton=="on")r=r+'<div class="eg-ajax-left eg-ajax-navbt"><i class="'+loc+'"></i></div><div class="eg-ajax-right eg-ajax-navbt"><i class="'+roc+'"></i></div>';if(e.ajaxCloseButton=="on")r=r+'<div class="eg-ajax-closer eg-ajax-navbt">'+xoc+e.ajaxCloseTxt+"</div>"}else{if(e.ajaxCloseButton=="on")r=r+'<div class="eg-ajax-closer eg-ajax-navbt">'+xoc+e.ajaxCloseTxt+"</div>";if(e.ajaxNavButton=="on")r=r+'<div class="eg-ajax-left eg-ajax-navbt"><i class="'+loc+'"></i></div><div class="eg-ajax-right eg-ajax-navbt"><i class="'+roc+'"></i></div>'}r=r+"</div>";switch(e.ajaxClosePosition){case"tl":case"tr":case"t":t.prepend(r);break;case"bl":case"br":case"b":t.append(r);break}t.find(".eg-ajax-closer").click(function(){showHideAjaxContainer(t,false,null,null,.25,true)});t.find(".eg-ajax-right").click(function(){var e=t.data("container").find(".lastclickedajax").closest("li"),n=e.nextAll().find(".eg-ajax-a-button"),r=e.prevAll().find(".eg-ajax-a-button");n=i(n);r=i(r);if(n.length>0){n[0].click()}else{r[0].click()}});t.find(".eg-ajax-left").click(function(){var e=t.data("container").find(".lastclickedajax").closest("li"),n=e.nextAll().find(".eg-ajax-a-button"),r=e.prevAll().find(".eg-ajax-a-button");n=i(n);r=i(r);if(r.length>0){r[r.length-1].click()}else{n[n.length-1].click()}})}function showHideAjaxContainer(e,t,n,r,i,s){i=i==undefined?.25:i;var o=e.data("container").data("opt"),u=e.data("lastheight")!=undefined?e.data("lastheight"):"100px";if(!t){if(s){killOldCustomAjaxContent(e);u="0px"}punchgs.TweenLite.to(e.parent(),i,{height:u,ease:punchgs.Power2.easeInOut,onStart:function(){punchgs.TweenLite.to(e,i,{autoAlpha:0,ease:punchgs.Power3.easeOut})},onComplete:function(){setTimeout(function(){if(s)e.html("")},300)}})}else{i=i+1.2;addAjaxNavigagtion(o,e);punchgs.TweenLite.set(e,{height:"auto"});punchgs.TweenLite.set(e.parent(),{minHeight:0,maxHeight:"none",height:"auto",overwrite:"all"});punchgs.TweenLite.from(e,i,{height:u,ease:punchgs.Power3.easeInOut,onStart:function(){punchgs.TweenLite.to(e,i,{autoAlpha:1,ease:punchgs.Power3.easeOut})},onComplete:function(){e.data("lastheight",e.height());jQuery(window).trigger("resize.essg");if(e.find(".eg-ajax-closer-wrapper").length==0)addAjaxNavigagtion(o,e)}});if(o.ajaxScrollToOnLoad!="off")jQuery("html, body").animate({scrollTop:e.offset().top-r},{queue:false,speed:.5})}}function removeLoader(e){e.closest(".eg-ajaxanimwrapper").find(".esg-loader").remove()}function ajaxCallBack(opt,a){if(opt.ajaxCallback==undefined||opt.ajaxCallback==""||opt.ajaxCallback.length<3)return false;var splitter=opt.ajaxCallback.split(")"),splitter=splitter[0].split("("),callback=splitter[0],arguments=splitter.length>1&&splitter[1]!=""?splitter[1]+",":"",obj=new Object;try{obj.containerid="#"+opt.ajaxContentTarget,obj.postsource=a.data("ajaxsource"),obj.posttype=a.data("ajaxtype");if(opt.ajaxCallbackArgument=="on")eval(callback+"("+arguments+"obj)");else eval(callback+"("+arguments+")")}catch(e){console.log("Callback Error");console.log(e)}}function loadMoreContent(e,t,n){e.find(".lastclickedajax").removeClass("lastclickedajax");n.addClass("lastclickedajax");var r=jQuery("#"+t.ajaxContentTarget).find(".eg-ajax-target"),i=n.data("ajaxsource"),s=n.data("ajaxtype"),o=n.data("ajaxvideoaspect");r.data("container",e);if(o=="16:9")o="widevideo";else o="normalvideo";showHideAjaxContainer(r,false);if(r.length>0){if(t.ajaxJsUrl!=undefined&&t.ajaxJsUrl!=""&&t.ajaxJsUrl.length>3){jQuery.getScript(t.ajaxJsUrl).done(function(e,n){t.ajaxJsUrl=""}).fail(function(e,n,r){console.log("Loading Error on Ajax jQuery File. Please doublecheck if JS File and Path exist:"+t.ajaxJSUrl);t.ajaxJsUrl=""})}if(t.ajaxCssUrl!=undefined&&t.ajaxCssUrl!=""&&t.ajaxCssUrl.length>3){jQuery("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href",t.ajaxCssUrl);t.ajaxCssUrl==""}buildLoader(r.closest(".eg-ajaxanimwrapper"),t);if(r.data("ajaxload")!=undefined)r.data("ajaxload").abort();killOldCustomAjaxContent(r);switch(s){case"postid":var u={action:t.loadMoreAjaxAction,client_action:"load_more_content",token:t.loadMoreAjaxToken,postid:i};setTimeout(function(){r.data("ajaxload",jQuery.ajax({type:"post",url:t.loadMoreAjaxUrl,dataType:"json",data:u}));r.data("ajaxload").success(function(e,i,s){if(e.success){jQuery(r).html(e.data);showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset);removeLoader(r);ajaxCallBack(t,n)}});r.data("ajaxload").error(function(e,t,n){if(t!="abort"){jQuery(r).append("<p>FAILURE: <strong>"+t+"</strong></p>");removeLoader(r)}})},300);break;case"youtubeid":setTimeout(function(){r.html('<div class="eg-ajax-video-container '+o+'"><iframe width="560" height="315" src="//www.youtube.com/embed/'+i+'?autoplay=1&vq=hd1080" frameborder="0" allowfullscreen></iframe></div>');removeLoader(r);showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset);ajaxCallBack(t,n)},300);break;case"vimeoid":setTimeout(function(){r.html('<div class="eg-ajax-video-container '+o+'"><iframe src="//player.vimeo.com/video/'+i+'?portrait=0&autoplay=1" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>');removeLoader(r);showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset);ajaxCallBack(t,n)},300);break;case"html5vid":i=i.split("|");setTimeout(function(){r.html('<video autoplay="true" loop="" class="rowbgimage" poster="" width="100%" height="auto"><source src="'+i[0]+'" type="video/mp4"><source src="'+i[1]+'" type="video/webm"><source src="'+i[2]+'" type="video/ogg"></video>');removeLoader(r);showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset);ajaxCallBack(t,n)},300);break;case"soundcloud":case"soundcloudid":setTimeout(function(){r.html('<iframe width="100%" height="250" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/'+i+'&auto_play=true&hide_related=false&show_comments=true&show_user=true&show_reposts=false&visual=true"></iframe>');removeLoader(r);showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset);ajaxCallBack(t,n)},300);break;case"imageurl":setTimeout(function(){var e=new Image;e.onload=function(){var e=jQuery(this);r.html("");e.css({width:"100%",height:"auto"});r.append(jQuery(this));removeLoader(r);showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset);ajaxCallBack(t,n)};e.onerror=function(e){r.html("Error");removeLoader(r);showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset)};e.src=i},300);break;default:jQuery.each(jQuery.fn.tpessential.defaults.ajaxTypes,function(e,n){if(n.openAnimationSpeed==undefined)n.openAnimationSpeed=0;if(n!=undefined&&n.type!=undefined){if(n.type==s){setTimeout(function(){r.data("lastposttype",s);r.data("oldajaxsource",i);r.data("oldajaxtype",s);r.data("oldajaxvideoaspect",o);r.data("oldselector","#"+t.ajaxContentTarget+" .eg-ajax-target");showHideAjaxContainer(r,true,t.ajaxScrollToOnLoad,t.ajaxScrollToOffset,0);r.html(n.func.call(this,{id:i,type:s,aspectratio:o}));removeLoader(r)},300)}}});break}}}function mainPreparing(e,t){var n=e.find(".eg-leftright-container");var r=getBestFitColumn(t,jQuery(window).width(),"id");t.column=r.column;t.columnindex=r.index;prepareItemsInGrid(t);organiseGrid(t);jQuery(t.filterGroupClass+".esg-filter-wrapper,"+t.filterGroupClass+" .esg-filter-wrapper").each(function(e){var t=jQuery(this);if(t.hasClass("dropdownstyle")){t.find(".esg-filter-checked").each(function(){jQuery(this).prependTo(jQuery(this).parent())});if(!is_mobile()){t.hover(function(){var e=jQuery(this).closest(".esg-filter-wrapper");e.find(".esg-selected-filterbutton").addClass("hoveredfilter");e.find(".esg-dropdown-wrapper").stop().slideDown(200)},function(){var e=jQuery(this).closest(".esg-filter-wrapper");e.find(".esg-selected-filterbutton").removeClass("hoveredfilter");e.find(".esg-dropdown-wrapper").stop().slideUp(200)})}else{t.find(".esg-selected-filterbutton").click(function(){var e=t.find(".esg-selected-filterbutton");if(e.hasClass("hoveredfilter")){setTimeout(function(){e.removeClass("hoveredfilter")},200);t.find(".esg-dropdown-wrapper").stop().slideUp(200);punchgs.TweenLite.to(t.find(".eg-icon-down-open"),.3,{scaleY:1})}else{setTimeout(function(){e.addClass("hoveredfilter")},200);t.find(".esg-dropdown-wrapper").stop().slideDown(200);punchgs.TweenLite.to(t.find(".eg-icon-down-open"),.3,{scaleY:-1})}})}}});jQuery(t.filterGroupClass+".esg-left,"+t.filterGroupClass+" .esg-left").click(function(){t=getOptions(e);t.oldpage=t.currentpage;t.currentpage--;if(t.currentpage<0)t.currentpage=t.realmaxpage-1;var n=getBestFitColumn(t,jQuery(window).width(),"id");t.column=n.column;t.columnindex=n.index;setItemsOnPages(t);organiseGrid(t,"right");setOptions(e,t);stopAllVideos(true)});jQuery(t.filterGroupClass+".esg-right,"+t.filterGroupClass+" .esg-right").click(function(){t=getOptions(e);t.oldpage=t.currentpage;t.currentpage++;if(t.currentpage>=t.realmaxpage)t.currentpage=0;var n=getBestFitColumn(t,jQuery(window).width(),"id");t.column=n.column;t.columnindex=n.index;setItemsOnPages(t);organiseGrid(t,"right");setOptions(e,t);stopAllVideos(true)});jQuery(t.filterGroupClass+".esg-filterbutton, "+t.filterGroupClass+" .esg-filterbutton").each(function(){if(!jQuery(this).hasClass("esg-pagination-button"))jQuery(this).click(function(){var t=getOptions(e);stopAllVideos(true);var n=jQuery(this);if(!n.hasClass("esg-pagination-button")){jQuery(t.filterGroupClass+".esg-allfilter, "+t.filterGroupClass+" .esg-allfilter").removeClass("selected");if(n.hasClass("esg-allfilter")){jQuery(t.filterGroupClass+".esg-filterbutton, "+t.filterGroupClass+" .esg-filterbutton").each(function(){jQuery(this).removeClass("selected")})}}if(n.closest(".esg-filters").hasClass("esg-singlefilters")||t.filterType=="single"){jQuery(t.filterGroupClass+".esg-filterbutton, "+t.filterGroupClass+" .esg-filterbutton").each(function(){jQuery(this).removeClass("selected")});n.addClass("selected")}else{if(n.hasClass("selected"))n.removeClass("selected");else n.addClass("selected")}var r=0;jQuery(t.filterGroupClass+".esg-filterbutton.selected,"+t.filterGroupClass+" .esg-filterbutton.selected").each(function(){if(jQuery(this).hasClass("selected")&&!jQuery(this).hasClass("esg-pagination-button"))r++});if(r==0)jQuery(t.filterGroupClass+".esg-allfilter,"+t.filterGroupClass+" .esg-allfilter").addClass("selected");t.filterchanged=true;t.currentpage=0;if(t.maxpage==1){jQuery(t.filterGroupClass+".navigationbuttons,"+t.filterGroupClass+" .navigationbuttons").css({display:"none"});jQuery(t.filterGroupClass+".esg-pagination,"+t.filterGroupClass+" .esg-pagination").css({display:"none"})}else{jQuery(t.filterGroupClass+".navigationbuttons,"+t.filterGroupClass+" .navigationbuttons").css({display:"inline-block"});jQuery(t.filterGroupClass+".esg-pagination,"+t.filterGroupClass+" .esg-pagination").css({display:"inline-block"})}var i=e.find(".esg-loadmore");if(i.length>0){var s=checkMoreToLoad(e,t).length;if(s>0)i.html(t.loadMoreTxt+" ("+s+")");else i.html(t.loadMoreEndTxt)}setItemsOnPages(t);organiseGrid(t);setOptions(e,t)})});var i;jQuery(window).on("resize.essg",function(){clearTimeout(i);if(t.forceFullWidth=="on"||t.forceFullScreen=="on"){var r=e.parent().parent().find(".esg-relative-placeholder").offset().left;e.closest(".esg-container-fullscreen-forcer").css({left:0-r,width:jQuery(window).width()})}else e.closest(".esg-container-fullscreen-forcer").css({left:0,width:"auto"});if(n.length>0){var s=n.outerWidth(true);punchgs.TweenLite.set(e.find(".esg-overflowtrick"),{width:e.width()-s,overwrite:"all"})}var o=getBestFitColumn(t,jQuery(window).width(),"id");t.column=o.column;t.columnindex=o.index;setOptions(e,t);i=setTimeout(function(){t=getOptions(e);setItemsOnPages(t);organiseGrid(t);setOptions(e,t)},200)});e.on("itemsinposition",function(){var e=jQuery(this);var t=getOptions(e);var n=e.find(".eg-leftright-container");clearTimeout(e.data("callednow"));if(t.maxheight>0&&t.maxheight<9999999999){t.inanimation=false;var r=e.find(".esg-overflowtrick").first();var i=e.find("ul").first();var n=e.find(".eg-leftright-container");var s=parseInt(r.css("paddingTop"),0);s=s==undefined?0:s;s=s==null?0:s;var o=parseInt(r.css("paddingBottom"),0);o=o==undefined?0:o;o=o==null?0:o;var u=t.maxheight+t.overflowoffset+s+o;if(t.forceFullScreen=="on"){var a=jQuery(window).height();if(t.fullScreenOffsetContainer!=undefined){try{var f=t.fullScreenOffsetContainer.split(",");jQuery.each(f,function(e,n){a=a-jQuery(n).outerHeight(true);if(a<t.minFullScreenHeight)a=t.minFullScreenHeight})}catch(l){}}u=a}var c=.3;if(i.height()<200)c=1;punchgs.TweenLite.to(i,c,{force3D:"auto",height:u,ease:punchgs.Power3.easeInOut,clearProps:"transform"});punchgs.TweenLite.to(r,c,{force3D:true,height:u,ease:punchgs.Power3.easeInOut,clearProps:"transform"});if(n.length>0)punchgs.TweenLite.set(n,{minHeight:u,ease:punchgs.Power3.easeInOut});var h=jQuery(t.filterGroupClass+".esg-navbutton-solo-left,"+t.filterGroupClass+" .esg-navbutton-solo-left");var p=jQuery(t.filterGroupClass+".esg-navbutton-solo-right,"+t.filterGroupClass+" .esg-navbutton-solo-right");if(h.length>0)h.css({marginTop:0-h.height()/2});if(p.length>0)p.css({marginTop:0-p.height()/2})}e.data("callednow",setTimeout(function(){e.find(".itemtoshow.isvisiblenow").each(function(){hideUnderElems(jQuery(this))})},250))});prepareSortingAndOrders(e);prepareSortingClicks(e)}function prepareSortingAndOrders(e){var t=getOptions(e);e.find(".tp-esg-item").each(function(){var e=new Date(jQuery(this).data("date"));jQuery(this).data("date",e.getTime()/1e3)});jQuery(t.filterGroupClass+".esg-sortbutton-order,"+t.filterGroupClass+" .esg-sortbutton-order").each(function(){var e=jQuery(this);e.removeClass("tp-desc").addClass("tp-asc");e.data("dir","asc")})}function prepareSortingClicks(e){opt=getOptions(e);var t;jQuery(opt.filterGroupClass+".esg-sortbutton-wrapper .esg-sortbutton-order,"+opt.filterGroupClass+" .esg-sortbutton-wrapper .esg-sortbutton-order").click(function(){var n=jQuery(this);if(n.hasClass("tp-desc")){n.removeClass("tp-desc").addClass("tp-asc");n.data("dir","asc")}else{n.removeClass("tp-asc").addClass("tp-desc");n.data("dir","desc")}var r=n.data("dir");stopAllVideos(true,true);jQuery(opt.filterGroupClass+".esg-sorting-select,"+opt.filterGroupClass+" .esg-sorting-select").each(function(){var n=jQuery(this).val();clearTimeout(t);e.find(".tp-esg-item").tsort({data:n,forceStrings:"false",order:r});t=setTimeout(function(){opt=getOptions(e);setItemsOnPages(opt);organiseGrid(opt);setOptions(e,opt)},200)})});jQuery(opt.filterGroupClass+".esg-sorting-select,"+opt.filterGroupClass+" .esg-sorting-select").each(function(){var n=jQuery(this);n.change(function(){e.find("iframe").css({visibility:"hidden"});e.find(".video-eg").css({visibility:"hidden"});var r=jQuery(this).closest(".esg-sortbutton-wrapper").find(".esg-sortbutton-order");var i=n.val();var s=n.find("option:selected").text();var o=r.data("dir");stopAllVideos(true,true);clearTimeout(t);n.parent().parent().find(".sortby_data").text(s);e.find(".tp-esg-item").tsort({data:i,forceStrings:"false",order:o});t=setTimeout(function(){opt=getOptions(e);setItemsOnPages(opt);organiseGrid(opt);setOptions(e,opt)},500)})})}function fixCenteredCoverElement(e,t,n){if(t==undefined)t=e.find(".esg-entry-cover");if(n==undefined)n=e.find(".esg-entry-media");if(t&&n){var r=n.height();punchgs.TweenLite.set(t,{height:r});var i=e.find(".esg-cc");punchgs.TweenLite.set(i,{top:(r-i.height())/2})}}function getBestFitColumn(e,t,n){var r=t,i=0,s=9999,o=0,u=e.column,a=e.column,f=e.column,l=0,c=0;if(e.responsiveEntries!=undefined&&e.responsiveEntries.length>0)jQuery.each(e.responsiveEntries,function(e,t){var n=t.width!=undefined?t.width:0,a=t.amount!=undefined?t.amount:0;if(s>n){s=n;u=a;c=e}if(o<n){o=n;lamount=a}if(n>i&&n<=r){i=n;f=a;l=e}});if(s>t){f=u;l=c}var h=new Object;h.index=l;h.column=f;if(n=="id")return h;else return f}function getOptions(e){return e.data("opt")}function setOptions(e,t){e.data("opt",t)}function checkMediaListeners(e){e.find("iframe").each(function(e){var t=jQuery(this);if(t.attr("src").toLowerCase().indexOf("youtube")>0)prepareYT(t);else if(t.attr("src").toLowerCase().indexOf("vimeo")>0)prepareVimeo(t);else if(t.attr("src").toLowerCase().indexOf("soundcloud")>0)prepareSoundCloud(t)});e.find("video").each(function(e){prepareVideo(jQuery(this))})}function waitMediaListeners(e){var t=setInterval(function(){e.find("iframe").each(function(e){var n=jQuery(this);if(n.attr("src").toLowerCase().indexOf("youtube")>0){if(prepareYT(n)){clearInterval(t)}}else if(n.attr("src").toLowerCase().indexOf("vimeo")>0){if(prepareVimeo(n)){clearInterval(t)}}else if(n.attr("src").toLowerCase().indexOf("soundcloud")>0){if(prepareSoundCloud(n)){clearInterval(t)}}else clearInterval(t)});e.find("video").each(function(e){if(prepareVideo(jQuery(this))){clearInterval(t)}})},50)}function directionPrepare(e,t,n,r,i){var s=new Object;switch(e){case 0:s.x=0;s.y=t=="in"?0-r:10+r;s.y=i&&t=="in"?s.y-5:s.y;break;case 1:s.y=0;s.x=t=="in"?n:-10-n;s.x=i&&t=="in"?s.x+5:s.x;break;case 2:s.y=t=="in"?r:-10-r;s.x=0;s.y=i&&t=="in"?s.y+5:s.y;break;case 3:s.y=0;s.x=t=="in"?0-n:10+n;s.x=i&&t=="in"?s.x-5:s.x;break}return s}function getDir(e,t){var n=e.width(),r=e.height(),i=(t.x-e.offset().left-n/2)*(n>r?r/n:1),s=(t.y-e.offset().top-r/2)*(r>n?n/r:1),o=Math.round((Math.atan2(s,i)*(180/Math.PI)+180)/90+3)%4;return o}function hideUnderElems(e){e.find(".eg-handlehideunder").each(function(){var t=jQuery(this);var n=t.data("hideunder"),r=t.data("hideunderheight"),i=t.data("hidetype");if(t.data("knowndisplay")==undefined)t.data("knowndisplay",t.css("display"));if(e.width()<n&&n!=undefined||e.height()<r&&r!=undefined){if(i=="visibility")t.addClass("forcenotvisible");else if(i=="display")t.addClass("forcenotdisplay")}else{if(i=="visibility")t.removeClass("forcenotvisible");else if(i=="display")t.removeClass("forcenotdisplay")}})}function offsetParrents(e,t){var n=t.closest(".mainul"),r=n.parent();if(t.position().top+t.height()>n.height()+40||e==0||n.data("bh")!=0&&n.data("bh")!=undefined&&t.position().top+t.height()>parseInt(n.data("bh"),0)+40){if(n.data("bh")==undefined||n.data("bh")==0)n.data("bh",n.height());if(r.data("bh")==undefined||r.data("bh")==0)r.data("bh",r.height());var i=n.data("bh"),s=r.data("bh");if(e!=0){n.data("alreadyinoff",false);punchgs.TweenLite.to(n,.2,{height:i+e});punchgs.TweenLite.to(r,.2,{height:s+e})}else{if(!n.data("alreadyinoff")){n.data("alreadyinoff",true);punchgs.TweenLite.to(n,.3,{height:i,ease:punchgs.Power3.easeIn,onComplete:function(){n.data("bh",0);r.data("bh",0);n.data("alreadyinoff",false)}});punchgs.TweenLite.to(r,.3,{height:s,ease:punchgs.Power3.easeIn,onComplete:function(){n.data("bh",0);r.data("bh",0);n.data("alreadyinoff",false)}})}}}}function itemHoverAnim(e,t,n,r){if(e.data("simplevideo")!=1)checkMediaListeners(e);var i=false;var s=e.find(".esg-media-poster");if(s.length>0){if(s.css("opacity")==0)i=true}if(e.find(".isplaying, .isinpause").length>0||i)return false;clearTimeout(e.data("hovertimer"));var o=n.mainhoverdelay;if(t=="set")o=0;e.data("hovertimer",setTimeout(function(){e.data("animstarted",1);punchgs.TweenLite.set(e,{z:.01,x:0,y:0,rotationX:0,rotationY:0,rotationZ:0});e.addClass("esg-hovered");var i=e.find(".esg-entry-cover");punchgs.TweenLite.set(i,{transformStyle:"flat"});if(t!="set")fixCenteredCoverElement(e,i);if(e.find(".esg-entry-content").length>0&&t!="set"&&n.layout=="even"){var s=e.data("pt"),o=e.data("pb"),u=e.data("pl"),a=e.data("pr"),f=e.data("bt"),l=e.data("bb"),c=e.data("bl"),h=e.data("br");e.data("hhh",e.outerHeight());e.data("www",e.outerWidth());punchgs.TweenLite.set(e.find(".esg-entry-content"),{display:"block"});punchgs.TweenLite.set(e.find(".esg-entry-media"),{height:e.data("hhh")});punchgs.TweenLite.set(e,{z:.1,zIndex:50,x:0-(u+a+h+c)/2,y:0-(s+o+f+l)/2,height:"auto",width:e.data("www")+u+a+c+h});if(n.evenGridMasonrySkinPusher=="on"){var p=e.height()-e.data("hhh");offsetParrents(p,e)}e.css({paddingTop:s+"px",paddingLeft:u+"px",paddingRight:a+"px",paddingBottom:a+"px"});e.css({borderTopWidth:f+"px",borderBottomWidth:l+"px",borderLeftWidth:c+"px",borderRightWidth:h+"px"});if(n.inanimation!=true)punchgs.TweenLite.set(e.closest(".esg-overflowtrick"),{overflow:"visible",overwrite:"all"})}jQuery.each(esgAnimmatrix,function(n,i){e.find(i[0]).each(function(){var n=jQuery(this),s=n.data("delay")!=undefined?n.data("delay"):0;animfrom=i[2];animto=i[3];animto.delay=s;animto.overwrite="all";animfrom.overwrite="all";animto.transformStyle="flat";animto.force3D=true;var o=0;var u=i[0].indexOf("out")>-1;if(!n.hasClass("esg-entry-media")&&!u)animto.clearProps="transform";animto.z=.001;if(animfrom.transformPerspective==undefined)animfrom.transformPerspective=1e3;if(n.hasClass("esg-overlay")){if(animfrom.z==undefined)animfrom.z=-.002;animto.z=-10.0001}var a=n;var f=false;if(n.hasClass("esg-entry-media")&&n.find(".esg-media-video").length>0)return true;punchgs.TweenLite.killTweensOf(a,false);if(t=="set")punchgs.TweenLite.set(a,animfrom);else switch(i[0]){case".esg-shifttotop":animto.y=0-e.find(".esg-bc.eec").last().height();punchgs.TweenLite.fromTo(n,.5,{y:0},{y:animto.y});break;case".esg-slide":var l=directionPrepare(r,"in",e.width(),e.height());var c=new Object;var h=new Object;jQuery.extend(c,animfrom);jQuery.extend(h,animto);c.css.x=l.x;c.css.y=l.y;punchgs.TweenLite.fromTo(a,i[1],c,h,o);break;case".esg-slideout":var l=directionPrepare(r,"out",e.width(),e.height());var c=new Object;var h=new Object;jQuery.extend(c,animfrom);jQuery.extend(h,animto);h.x=l.x;h.y=l.y;h.clearProps="";punchgs.TweenLite.fromTo(a,i[1],c,h,o);break;default:punchgs.TweenLite.fromTo(a,i[1],animfrom,animto,o);break}})})},o))}function videoClickEvent(e,t,n,r){e.css({transform:"none","-moz-transform":"none","-webkit-transform":"none"});e.closest(".esg-overflowtrick").css({transform:"none","-moz-transform":"none","-webkit-transform":"none"});e.closest("ul").css({transform:"none","-moz-transform":"none","-webkit-transform":"none"});if(!r)e.find(".esg-media-video").each(function(){var t=jQuery(this);if(t.data("youtube")!=undefined&&e.find(".esg-youtube-frame").length==0){var n=e.find(".esg-entry-media");var r="https://www.youtube.com/embed/"+t.data("youtube")+"?version=3&enablejsapi=1&html5=1&controls=1&autohide=1&rel=0&showinfo=0";n.append('<iframe class="esg-youtube-frame" wmode="Opaque" style="position:absolute;top:0px;left:0px;display:none" width="'+t.attr("width")+'" height="'+t.attr("height")+'" data-src="'+r+'" src="about:blank"></iframe>')}if(t.data("vimeo")!=undefined&&e.find(".esg-vimeo-frame").length==0){var n=e.find(".esg-entry-media");var i="http://player.vimeo.com/video/"+t.data("youtube")+"?title=0&byline=0&html5=1&portrait=0&api=1;";n.append('<iframe class="esg-vimeo-frame"  allowfullscreen="false" style="position:absolute;top:0px;left:0px;display:none" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" width="'+t.attr("width")+'" height="'+t.attr("height")+'" data-src="'+i+'" src="about:blank"></iframe>')}if(t.data("soundcloud")!=undefined&&e.find(".esg-soundcloud-frame").length==0){var n=e.find(".esg-entry-media");var s="https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/"+t.data("soundcloud")+"&auto_play=false&hide_related=false&visual=true&show_artwork=true";n.append('<iframe class="esg-soundcloud-frame" allowfullscreen="false" style="position:absolute;top:0px;left:0px;display:none" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" width="'+t.attr("width")+'" height="'+t.attr("height")+'" scrolling="no" frameborder="no" data-src="'+s+'" src="about:blank"></iframe>')}if((t.data("mp4")!=undefined||t.data("webm")!=undefined||t.data("ogv")!=undefined)&&e.find(".esg-video-frame").length==0){var n=e.find(".esg-entry-media");n.append('<video class="esg-video-frame" style="position:absolute;top:0px;left:0px;display:none" width="'+t.attr("width")+'" height="'+t.attr("height")+'" data-origw="'+t.attr("width")+'" data-origh="'+t.attr("height")+'" ></video');if(t.data("mp4")!=undefined)n.find("video").append('<source src="'+t.data("mp4")+'" type="video/mp4" />');if(t.data("webm")!=undefined)n.find("video").append('<source src="'+t.data("webm")+'" type="video/webm" />');if(t.data("ogv")!=undefined)n.find("video").append('<source src="'+t.data("ogv")+'" type="video/ogg" />')}});adjustMediaSize(e,true,null,n);var i=e.find(".esg-youtube-frame");if(i.length==0)i=e.find(".esg-vimeo-frame");if(i.length==0)i=e.find(".esg-soundcloud-frame");if(i.length==0)i=e.find(".esg-video-frame");var s=e.find(".esg-entry-cover");var o=e.find(".esg-media-poster");if(i.attr("src")=="about:blank"){i.attr("src",i.data("src"));loadVideoApis(t,n);if(!r)punchgs.TweenLite.set(i,{opacity:0,display:"block"});var u=setInterval(function(){if(i.attr("src").toLowerCase().indexOf("youtube")>0){if(prepareYT(i)==true){clearInterval(u);if(!r){if(is_mobile()){punchgs.TweenLite.set(i,{autoAlpha:1});punchgs.TweenLite.set(o,{autoAlpha:0});punchgs.TweenLite.set(s,{autoAlpha:0})}else{punchgs.TweenLite.to(i,.5,{autoAlpha:1});punchgs.TweenLite.to(o,.5,{autoAlpha:0});punchgs.TweenLite.to(s,.5,{autoAlpha:0});playYT(i,r)}}}}else if(i.attr("src").toLowerCase().indexOf("vimeo")>0){if(prepareVimeo(i)==true){clearInterval(u);if(!r){if(is_mobile()){punchgs.TweenLite.set(i,{autoAlpha:1});punchgs.TweenLite.set(o,{autoAlpha:0});punchgs.TweenLite.set(s,{autoAlpha:0})}else{punchgs.TweenLite.to(i,.5,{autoAlpha:1});punchgs.TweenLite.to(o,.5,{autoAlpha:0});punchgs.TweenLite.to(s,.5,{autoAlpha:0})}playVimeo(i,r)}}}else if(i.attr("src").toLowerCase().indexOf("soundcloud")>0){if(prepareSoundCloud(i)==true){clearInterval(u);if(!r){if(is_mobile()){punchgs.TweenLite.set(i,{autoAlpha:1});punchgs.TweenLite.set(o,{autoAlpha:0});punchgs.TweenLite.set(s,{autoAlpha:0})}else{punchgs.TweenLite.to(i,.5,{autoAlpha:1});punchgs.TweenLite.to(o,.5,{autoAlpha:0});punchgs.TweenLite.to(s,.5,{autoAlpha:0})}playSC(i,r)}}}},100)}else if(i.hasClass("esg-video-frame")){loadVideoApis(t,n);punchgs.TweenLite.set(i,{opacity:0,display:"block"});var u=setInterval(function(){if(prepareVideo(i)==true){clearInterval(u);if(!r){if(is_mobile()){punchgs.TweenLite.set(i,{autoAlpha:1});punchgs.TweenLite.set(o,{autoAlpha:0});punchgs.TweenLite.set(s,{autoAlpha:0})}else{punchgs.TweenLite.to(i,.5,{autoAlpha:1});punchgs.TweenLite.to(o,.5,{autoAlpha:0});punchgs.TweenLite.to(s,.5,{autoAlpha:0})}playVideo(i,r)}}},100)}else{if(!r){if(is_mobile()){punchgs.TweenLite.set(i,{autoAlpha:1});punchgs.TweenLite.set(o,{autoAlpha:0});punchgs.TweenLite.set(s,{autoAlpha:0})}else{punchgs.TweenLite.set(i,{opacity:0,display:"block"});punchgs.TweenLite.to(i,.5,{autoAlpha:1});punchgs.TweenLite.to(o,.5,{autoAlpha:0});punchgs.TweenLite.to(s,.5,{autoAlpha:0})}}if(i.attr("src")!=undefined){if(i.attr("src").toLowerCase().indexOf("youtube")>0)playYT(i,r);if(i.attr("src").toLowerCase().indexOf("vimeo")>0)playVimeo(i,r);if(i.attr("src").toLowerCase().indexOf("soundcloud")>0)playSC(i,r)}}}function prepareItemsInGrid(e,t){var n=e.container;n.addClass("esg-container");if(!t){n.find(".mainul>li").each(function(){jQuery(this).addClass("eg-newli")})}var r=n.find(".mainul>.eg-newli"),i=100/e.column,s=e.aspectratio,o=n.find(".esg-overflowtrick").parent().width(),u=n.find("ul").first(),a=n.find(".esg-overflowtrick").first(),f=0;s=s.split(":");aratio=parseInt(s[0],0)/parseInt(s[1],0);f=o/e.column/aratio;jQuery.each(r,function(t,r){var i=jQuery(r),s=i.find(".esg-entry-media"),o=s.find("img").attr("src");i.removeClass("eg-newli");punchgs.TweenLite.set(i,{force3D:"auto",autoAlpha:0,opacity:0});i.addClass("tp-esg-item");if(e.layout=="even"){if(o!=undefined){i.find(".esg-entry-media").wrap('<div class="esg-entry-media-wrapper" style="width:100%;height:100%; overflow:hidden;position:relative;"></div>');s.find("img").css({top:"0px",left:"0px",width:"100%",height:"auto",visibility:"visible",display:"block"})}}else{i.find(".esg-entry-media").wrap('<div class="esg-entry-media-wrapper" style="overflow:hidden;position:relative;"></div>')}i.find(".esg-media-video").each(function(){var t=jQuery(this),r=i.find(".esg-entry-media"),s="display:none;",o="data-src=",u="src=";if(t.data("poster")!=undefined&&t.data("poster").length>3){if(e.layout!="even"){r.append('<img class="esg-media-poster" src="'+t.data("poster")+'" width="'+t.attr("width")+'" height="'+t.attr("height")+'">');r.find("img").css({top:"0px",left:"0px",width:"100%",height:"auto",visibility:"visible",display:"block"})}else{r.append('<div class="esg-media-poster" style="background:url('+t.data("poster")+'); background-size:cover; background-position:center center">');r.find(".esg-media-poster").css({width:"100%",height:"100%",visibility:"visible",position:"relative",display:"block"})}}else{i.find(".esg-entry-cover").remove();s="display:block;";o="src=";u="data-src=";i.data("simplevideo",1)}if(i.find(".esg-click-to-play-video").length==0){i.find(".esg-entry-cover").find("*").each(function(){if(jQuery(this).closest("a").length==0&&jQuery(this).find("a").length==0){jQuery(this).addClass("esg-click-to-play-video")}});i.find(".esg-overlay").addClass("esg-click-to-play-video")}if(t.data("youtube")!=undefined){var a="https://www.youtube.com/embed/"+t.data("youtube")+"?version=3&enablejsapi=1&html5=1&controls=1&autohide=1&rel=0&showinfo=0";r.append('<iframe class="esg-youtube-frame" wmode="Opaque" style="position:absolute;top:0px;left:0px;'+s+'" width="'+t.attr("width")+'" height="'+t.attr("height")+'" '+o+'"'+a+'" '+u+'"about:blank"></iframe>')}if(t.data("vimeo")!=undefined){var f="http://player.vimeo.com/video/"+t.data("vimeo")+"?title=0&byline=0&html5=1&portrait=0&api=1";r.append('<iframe class="esg-vimeo-frame" style="position:absolute;top:0px;left:0px;'+s+'" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""  width="'+t.attr("width")+'" height="'+t.attr("height")+'" '+o+'"'+f+'" '+u+'"about:blank"></iframe>')}if(t.data("soundcloud")!=undefined){var l="https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/"+t.data("soundcloud")+"&auto_play=false&hide_related=false&visual=true&show_artwork=true";r.append('<iframe class="esg-soundcloud-frame" style="position:absolute;top:0px;left:0px;'+s+'" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" width="'+t.attr("width")+'" height="'+t.attr("height")+'" '+o+'"'+l+'" '+u+'"about:blank"></iframe>')}if(t.data("mp4")!=undefined||t.data("webm")!=undefined||t.data("ogv")!=undefined){r.append('<video class="esg-video-frame" controls style="position:absolute;top:0px;left:0px;'+s+'" width="'+t.attr("width")+'" height="'+t.attr("height")+'" data-origw="'+t.attr("width")+'" data-origh="'+t.attr("height")+'"></video');if(t.data("mp4")!=undefined)r.find("video").append('<source src="'+t.data("mp4")+'" type="video/mp4" />');if(t.data("webm")!=undefined)r.find("video").append('<source src="'+t.data("webm")+'" type="video/webm" />');if(t.data("ogv")!=undefined)r.find("video").append('<source src="'+t.data("ogv")+'" type="video/ogg" />')}i.find(".esg-click-to-play-video").click(function(){var t=jQuery(this).closest(".tp-esg-item");videoClickEvent(t,n,e)});if(i.data("simplevideo")==1)waitMediaListeners(i)});if(i.find(".esg-media-video").length==0){i.find(".esg-click-to-play-video").remove()}adjustMediaSize(i,true,null,e);if(i.find(".esg-entry-content").length>0&&i.find(".esg-media-cover-wrapper").length>0){if(i.find(".esg-entry-content").index()<i.find(".esg-media-cover-wrapper").index()){}else{i.find(".esg-entry-content").addClass("esg-notalone")}}i.find(".esg-entry-cover").each(function(e){var t=jQuery(this),n=t.data("clickable");t.find(".esg-top").wrapAll('<div class="esg-tc eec"></div>');t.find(".esg-left").wrapAll('<div class="esg-lc eec"></div>');t.find(".esg-right").wrapAll('<div class="esg-rc eec"></div>');t.find(".esg-center").wrapAll('<div class="esg-cc eec"></div>');t.find(".esg-bottom").wrapAll('<div class="esg-bc eec"></div>');t.find(".eec").append("<div></div>");if(n=="on"&&t.find(".esg-overlay").length==1){t.click(function(e){if(jQuery(e.target).closest("a").length==0)jQuery(this).find(".eg-invisiblebutton")[0].click()}).css({cursor:"pointer"})}});i.data("pt",parseInt(i.css("paddingTop"),0));i.data("pb",parseInt(i.css("paddingBottom"),0));i.data("pl",parseInt(i.css("paddingLeft"),0));i.data("pr",parseInt(i.css("paddingRight"),0));i.data("bt",parseInt(i.css("borderTopWidth"),0));i.data("bb",parseInt(i.css("borderBottomWidth"),0));i.data("bl",parseInt(i.css("borderLeftWidth"),0));i.data("br",parseInt(i.css("borderRightWidth"),0));if(i.find(".esg-entry-content").length>0&&e.layout=="even"){i.css({paddingTop:"0px",paddingLeft:"0px",paddingRight:"0px",paddingBottom:"0px"});i.css({borderTopWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px",borderRightWidth:"0px"})}i.find(".eg-handlehideunder").each(function(){});if(e.ajaxContentTarget!=undefined&&jQuery("#"+e.ajaxContentTarget).length>0)i.find(".eg-ajaxclicklistener, a").each(function(){var t=jQuery(this),r=jQuery("#"+e.ajaxContentTarget).find(".eg-ajax-target");if(!r.parent().hasClass("eg-ajaxanimwrapper")){r.wrap('<div class="eg-ajaxanimwrapper" style="position:relative;overflow:hidden;"></div>')}if(t.data("ajaxsource")!=undefined&&t.data("ajaxtype")!=undefined){t.addClass("eg-ajax-a-button");t.click(function(){loadMoreContent(n,e,t);if(r.length>0)return false;else return true})}});i.find(".eg-triggerfilter").click(function(){var t=jQuery(this).data("filter");jQuery(e.filterGroupClass+".esg-filterbutton,"+e.filterGroupClass+" .esg-filterbutton").each(function(){if(jQuery(this).data("filter")==t)jQuery(this).click()});return false}).css({cursor:"pointer"});i.on("mouseenter.hoverdir, mouseleave.hoverdir",function(t){var n=jQuery(this),r=getDir(n,{x:t.pageX,y:t.pageY});if(t.type==="mouseenter")itemHoverAnim(jQuery(this),"nope",e,r);else{clearTimeout(n.data("hovertimer"));if(n.data("animstarted")==1){n.data("animstarted",0);n.removeClass("esg-hovered");var i=n.find(".esg-entry-cover"),s=0;if(n.find(".esg-entry-content").length>0&&e.layout=="even"){punchgs.TweenLite.set(n.find(".esg-entry-content"),{display:"none"});punchgs.TweenLite.set(n,{zIndex:5});punchgs.TweenLite.set(n.closest(".esg-overflowtrick"),{overflow:"hidden",overwrite:"all"});n.css({paddingTop:"0px",paddingLeft:"0px",paddingRight:"0px",paddingBottom:"0px"});n.css({borderTopWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px",borderRightWidth:"0px"});n.find(".esg-entry-media").css({height:"100%"});punchgs.TweenLite.set(n,{z:0,height:n.data("hhh"),width:n.data("www"),x:0,y:0});if(e.evenGridMasonrySkinPusher=="on")offsetParrents(0,n)}jQuery.each(esgAnimmatrix,function(e,t){n.find(t[0]).each(function(){var e=jQuery(this),i=e.data("delay")!=undefined?e.data("delay"):0,o=t[5],u=0;animobject=e,splitted=false;if(s<i)s=i;if(o.z==undefined)o.z=50;switch(t[0]){case".esg-slide":var a=directionPrepare(r,"in",n.width(),n.height(),true);o.x=a.x;o.y=a.y;punchgs.TweenLite.to(animobject,.5,{y:o.y,x:o.x,overwrite:"all",onCompleteParams:[animobject],onComplete:function(e){punchgs.TweenLite.set(e,{autoAlpha:0})}});break;case".esg-slideout":var a=directionPrepare(r,"out",n.width(),n.height());o.x=0;o.y=0;o.overwrite="all";punchgs.TweenLite.fromTo(animobject,.5,{autoAlpha:1,x:a.x,y:a.y},{x:0,y:0,autoAlpha:1,overwrite:"all"});break;default:o.force3D="auto";punchgs.TweenLite.to(animobject,t[4],o,u);break}})})}if(n.hasClass("esg-demo"))setTimeout(function(){itemHoverAnim(n)},800)}});itemHoverAnim(i,"set",e);if(i.hasClass("esg-demo"))itemHoverAnim(i)});loadVideoApis(n,e);setItemsOnPages(e);if(!t){}}function adjustMediaSize(e,t,n,r){if(e.find("iframe").length>0){e.find("iframe").each(function(i){var s=jQuery(this);s.data("origw",s.attr("width"));s.data("origh",s.attr("height"));var o=s.data("origw");var u=s.data("origh");if(n!=undefined)var a=n.itemw;else var a=e.width();ifh=a/o*u;a=Math.round(a);ifh=Math.round(ifh);s.data("neww",a);s.data("newh",ifh);if(t&&r.layout!="even"){punchgs.TweenLite.set(s,{width:a,height:ifh});punchgs.TweenLite.set(e.find(".esg-media-poster"),{width:a,height:ifh});punchgs.TweenLite.set(e.find(".esg-entry-media"),{width:a,height:ifh})}else{punchgs.TweenLite.set(s,{width:"100%",height:"100%"});punchgs.TweenLite.set(e.find(".esg-media-poster"),{width:"100%",height:"100%"});punchgs.TweenLite.set(e.find(".esg-entry-media"),{width:"100%",height:"100%"})}})}if(e.find(".esg-video-frame").length>0){e.find(".esg-video-frame").each(function(i){var s=jQuery(this);s.parent().data("origw",s.data("origw"));s.parent().data("origh",s.data("origh"));var o=s.data("origw");var u=s.data("origh");if(n!=undefined)var a=n.itemw;else var a=e.width();ifh=a/o*u;a=Math.round(a);ifh=Math.round(ifh);s.data("neww",a);s.data("newh",ifh);if(t&&r.layout!="even"){punchgs.TweenLite.set(s,{width:a,height:ifh});punchgs.TweenLite.set(e.find(".esg-media-poster"),{width:a,height:ifh});punchgs.TweenLite.set(e.find(".esg-entry-media"),{width:a,height:ifh})}else{punchgs.TweenLite.set(s,{width:"100%",height:"100%"});punchgs.TweenLite.set(e.find(".esg-media-poster"),{width:"100%",height:"100%"});punchgs.TweenLite.set(e.find(".esg-entry-media"),{width:"100%",height:"100%"})}})}}function setItemsOnPages(e){var t=e.container;var n=t.find(".mainul>li"),r=e.column*e.row;var i=e.rowItemMultiplier;var s=i.length;if(s>0)if(e.layout=="even"){r=0;for(var o=0;o<e.row;o++){var u=o-s*Math.floor(o/s);r=r+i[u][e.columnindex]}}var a=r*e.currentpage,f=t.find(".esg-overflowtrick").parent().width(),l=a+r,c=jQuery(e.filterGroupClass+".esg-filterbutton.selected:not(.esg-navigationbutton),"+e.filterGroupClass+" .esg-filterbutton.selected:not(.esg-navigationbutton)"),h=0;if(jQuery(e.filterGroupClass+".esg-filter-wrapper, "+e.filterGroupClass+" .esg-filter-wrapper").length>0){jQuery.each(n,function(t,n){var r=jQuery(n);r.find(".esgbox").each(function(){if(e.lightBoxMode=="all")jQuery(this).attr("rel","group");else if(e.lightBoxMode!="contentgroup")jQuery(this).attr("rel","")});var i=true,s=0;jQuery.each(c,function(e,t){if(r.hasClass(jQuery(t).data("filter"))){i=false;s++}});if(e.filterLogic=="and"&&s<c.length)i=true;if(h>=a&&h<l&&!i){r.addClass("itemtoshow").removeClass("itemishidden").removeClass("itemonotherpage");if(e.lightBoxMode=="filterpage"||e.lightBoxMode=="filterall")r.find(".esgbox").attr("rel","group");h++}else{if(e.lightBoxMode=="filterall")r.find(".esgbox").attr("rel","group");if(!i){if(h<a||h>=l){r.addClass("itemonotherpage");r.removeClass("itemtoshow");h++}else{r.addClass("itemtoshow").removeClass("itemishidden").removeClass("itemonotherpage");h++}r.addClass("fitsinfilter")}else{r.addClass("itemishidden").removeClass("itemtoshow").removeClass("fitsinfilter")}}})}else{jQuery.each(n,function(t,n){var r=jQuery(n);r.find(".esgbox").each(function(){if(e.lightBoxMode=="all")jQuery(this).attr("rel","group");else jQuery(this).attr("rel","")});if(h>=a&&h<l){r.addClass("itemtoshow").removeClass("itemishidden").removeClass("itemonotherpage");h++}else{if(h<a||h>=l){r.addClass("itemonotherpage");r.removeClass("itemtoshow");h++}else{r.addClass("itemtoshow").removeClass("itemishidden").removeClass("itemonotherpage");h++}r.addClass("fitsinfilter")}})}e.nonefiltereditems=t.find(".itemtoshow, .fitsinfilter").length;if(e.loadMoreType!="none"){var p=0;var d=false;c.each(function(){var e=jQuery(this).data("filter");if(e!=undefined){var n=t.find("."+e).length;p=p+n;if(n==0)d=true}});if(c.length==0||c.length==1)p=1;if(p==0||d)loadMoreItems(t,e)}var v=jQuery(e.filterGroupClass+".esg-pagination,"+e.filterGroupClass+" .esg-pagination");v.find(".esg-pagination").remove();v.html("");e.maxpage=0;var m;var g=Math.ceil(e.nonefiltereditems/r);e.realmaxpage=g;if(g>7&&e.smartPagination=="on"){if(e.currentpage<3){for(var o=0;o<4;o++){if(o==e.currentpage)m="selected";else m="";e.maxpage++;v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="'+o+'">'+(o+1)+"</div>")}v.append('<div class="esg-navigationbutton">...</div>');v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="'+(g-1)+'">'+g+"</div>")}else if(g-e.currentpage<4){v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="0">1</div>');v.append('<div class="esg-navigationbutton">...</div>');for(var o=g-4;o<g;o++){if(o==e.currentpage)m="selected";else m="";e.maxpage++;v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="'+o+'">'+(o+1)+"</div>")}}else{v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="0">1</div>');v.append('<div class="esg-navigationbutton">...</div>');for(var o=e.currentpage-1;o<e.currentpage+2;o++){if(o==e.currentpage)m="selected";else m="";e.maxpage++;v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="'+o+'">'+(o+1)+"</div>")}v.append('<div class="esg-navigationbutton">...</div>');v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="'+(g-1)+'">'+g+"</div>")}}else{for(var o=0;o<g;o++){if(o==e.currentpage)m="selected";else m="";e.maxpage++;v.append('<div class="esg-navigationbutton esg-filterbutton esg-pagination-button '+m+'" data-page="'+o+'">'+(o+1)+"</div>")}}if(e.maxpage==1){jQuery(e.filterGroupClass+".esg-navigationbutton,"+e.filterGroupClass+" .esg-navigationbutton").not(".esg-loadmore").css({display:"none"});v.css({display:"none"})}else{jQuery(e.filterGroupClass+".esg-navigationbutton,"+e.filterGroupClass+" .esg-navigationbutton").css({display:"inline-block"});v.css({display:"inline-block"})}if(e.currentpage>=Math.ceil(e.nonefiltereditems/r)){e.oldpage=e.currentpage;e.currentpage=0;var y=0;t.find(".itemtoshow, .fitsinfilter").each(function(){y++;if(y<l)jQuery(this).removeClass("itemonotherpage")});v.find(".esg-pagination-button").first().addClass("selected")}if(e.currentpage<0)e.currentpage=0;v.find(".esg-pagination-button").on("click",function(){e.oldpage=e.currentpage;e.currentpage=jQuery(this).data("page");e=getOptions(t);var n=getBestFitColumn(e,jQuery(window).width(),"id");e.column=n.column;e.columnindex=n.index;setItemsOnPages(e);organiseGrid(e);setOptions(t,e);stopAllVideos(true);if(e.paginationScrollToTop=="on"){jQuery("html, body").animate({scrollTop:t.offset().top-e.paginationScrollToTopOffset},{queue:false,speed:.5})}});if(e.firstshowever==undefined)jQuery(e.filterGroupClass+".esg-navigationbutton,"+e.filterGroupClass+" .esg-navigationbutton").css({visibility:"hidden"})}function waittorungGrid(e,t,n){var r=e.closest(".mainul");clearTimeout(r.data("intreorganisier"));if(!r.hasClass("gridorganising")){runGrid(t,n)}else{r.data("intreorganisier",setTimeout(function(){waittorungGrid(e,t,n)},10))}}function loadAllPrepared(e,t){if(e.data("preloading")==1)return false;var n=t.aspectratio,r=parseInt(n[0],0)/parseInt(n[1],0),i=new Image;if(e.data("lazysrc")!=e.attr("src")&&e.data("lazysrc")!=undefined&&e.data("lazysrc")!="undefined"){if(e.data("lazysrc")!=undefined&&e.data("lazysrc")!="undefined")e.attr("src",e.data("lazysrc"))}e.data("preloading",1);i.onload=function(n){e.data("lazydone",1);e.data("ww",i.width);e.data("hh",i.height);e.closest(".showmeonload").addClass("itemtoshow").removeClass("showmeonload").addClass("loadedmedia");evenImageRatio(e,t);if(t.lazyLoad=="on")waittorungGrid(e,t,true)};i.onerror=function(){e.data("lazydone",1);e.closest(".showmeonload").addClass("itemtoshow").removeClass("showmeonload").addClass("loadedmedia");if(t.lazyLoad=="on")waittorungGrid(e,t,true)};if(e.attr("src")!=undefined&&e.attr("src")!="undefined")i.src=e.attr("src");else i.src=e.data("src");if(i.complete){e.data("lazydone",1);e.data("ww",i.width);e.data("hh",i.height);e.closest(".showmeonload").addClass("itemtoshow").removeClass("showmeonload").addClass("loadedmedia");evenImageRatio(e,t);if(t.lazyLoad=="on")waittorungGrid(e,t,true)}}function organiseGrid(e){var t=e.container;if(e.listneractivated==undefined){t.on("visibleimagesloaded",function(){runGrid(e)});e.listneractivated=true;setOptions(t,e)}waitForLoads(t.find(".itemtoshow"),e)}function evenImageRatio(e,t,n){if(t.layout=="even"&&e.is(":visible")){var r=t.aspectratio;r=r.split(":");var i=parseInt(r[0],0)/parseInt(r[1],0),s=e.data("ww"),o=e.data("lazydone");if(s==undefined&&o==1||t.forceFullScreen=="on"&&o==1||n&&s!=undefined){var u=e.data("hh"),a=s/u;if(a>=i){var f=u/r[1],l=u/f,c=s/f,h=(c-r[0])/2;h=100/r[0]*h;e.css({position:"absolute",width:"auto",height:"101%",top:"0%",left:0-h+"%"})}else{var f=s/r[0],l=u/f,c=s/f,h=(l-r[1])/2;h=100/r[1]*h;e.css({position:"absolute",width:"101%",height:"auto",left:"0%",top:0-h+"%"})}removeLLCover(e)}}else{removeLLCover(e)}}function removeLLCover(e){if(!e.hasClass("coverremoved")&&e.parent().find(".lazyloadcover").length>0){e.addClass("coverremoved");punchgs.TweenLite.to(e.parent().find(".lazyloadcover"),.5,{autoAlpha:0,ease:punchgs.Power3.easeInOut,onComplete:function(){e.parent().find(".lazyloadcover").remove()}})}}function runGrid(e,t){var n=e.container;if(e.firstshowever==undefined){if(n.is(":hidden")){punchgs.TweenLite.set(n,{autoAlpha:1,display:"block"});setTimeout(function(){runGridMain(e,t);jQuery(e.filterGroupClass+".esg-navigationbutton, "+e.filterGroupClass+" .esg-navigationbutton").css({visibility:"visible"})},300)}else{runGridMain(e,t);jQuery(e.filterGroupClass+".esg-navigationbutton, "+e.filterGroupClass+" .esg-navigationbutton").css({visibility:"visible"})}e.firstshowever=1}else{runGridMain(e,t);jQuery(e.filterGroupClass+".esg-navigationbutton, "+e.filterGroupClass+" .esg-navigationbutton").css({visibility:"visible"})}}function getCobblePat(e,t){var n=new Object;n.w=1;n.h=1;e=e.split(",");if(e!=undefined){e=e[t-Math.floor(t/e.length)*e.length].split("x");n.w=e[0];n.h=e[1]}return n}function runGridMain(e,t){var n=e.container,r=n.find(".itemtoshow, .isvisiblenow").not(".ui-sortable-helper"),i=new Object,s=n.find("ul").first(),o=n.find(".esg-overflowtrick").first(),u=e.aspectratio,a,f=0;e.aspectratioOrig=e.aspectratio;n.find(".mainul").addClass("gridorganising");u=u.split(":");a=parseInt(u[0],0)/parseInt(u[1],0);i.item=0;i.pagetoanimate=0-e.currentpage;i.col=0;i.row=0;i.pagecounter=0;i.itemcounter=0;i.fakecol=0;i.fakerow=0;i.maxheight=0;i.allcol=0;i.allrow=0;i.ulcurheight=0;i.ulwidth=s.width();i.verticalsteps=1;i.currentcolumnheight=new Array;for(var l=0;l<e.column;l++)i.currentcolumnheight[l]=0;i.pageitemcounterfake=0;i.pageitemcounter=0;if(e.delayBasic!=undefined)i.delaybasic=e.delayBasic;else i.delaybasic=.08;i.anim=e.pageAnimation;i.itemtowait=0;i.itemouttowait=0;i.ease="punchgs.Power1.easeInOut";i.easeout=i.ease;i.row=0;i.col=0;var c=e.rowItemMultiplier,h=c.length,p=e.column;i.y=0;i.fakey=0;n.find(".esg-overflowtrick").css({width:n.find(".esg-overflowtrick").parent().width()});i.cwidth=n.find(".esg-overflowtrick").width()-e.overflowoffset*2;e.inanimation=true;i.cwidth_n_spaces=i.cwidth-(e.column-1)*e.space;i.itemw=Math.round(i.cwidth_n_spaces/e.column);i.originalitemw=i.itemw;if(e.forceFullScreen=="on"){f=jQuery(window).height();if(e.fullScreenOffsetContainer!=undefined){try{var d=e.fullScreenOffsetContainer.split(",");jQuery.each(d,function(t,n){f=f-jQuery(n).outerHeight(true);if(f<e.minFullScreenHeight)f=e.minFullScreenHeight})}catch(v){}}}if(e.layout=="even"){i.itemh=Math.round(f)==0?Math.round(i.cwidth_n_spaces/e.column/a):Math.round(f/e.row);e.aspectratio=f==0?e.aspectratio:i.itemw+":"+i.itemh;if(h>0)punchgs.TweenLite.set(r,{display:"block",visibility:"visible",overwrite:"auto"});else punchgs.TweenLite.set(r,{display:"block",width:i.itemw,height:i.itemh,visibility:"visible",overwrite:"auto"})}else{punchgs.TweenLite.set(r,{display:"block",width:i.itemw,height:"auto",visibility:"visible",overwrite:"auto"})}if(!t){punchgs.TweenLite.killTweensOf(r)}i.originalitemh=i.itemh;var m=new Array,g=e.row*e.column*2;for(var y=0;y<g;y++){var b=new Array;for(var w=0;w<e.column;w++){b.push(0)}m.push(b)}var E=0;jQuery.each(r,function(t,r){var o=jQuery(r);i.itemw=i.originalitemw;if(e.evenCobbles=="on"&&!o.hasClass("itemonotherpage")&&!o.hasClass("itemishidden")){var u=o.data("cobblesw"),l=o.data("cobblesh");if(e.cobblesPattern!=undefined&&e.cobblesPattern.length>2){var p=getCobblePat(e.cobblesPattern,E);u=parseInt(p.w,0);l=parseInt(p.h,0);E++}u=u==undefined?1:u;l=l==undefined?1:l;if(e.column<u)u=e.column;i.cobblesorigw=i.originalitemw;i.cobblesorigh=i.originalitemh;i.itemw=i.itemw*u+(u-1)*e.space;i.itemh=i.originalitemh;i.itemh=i.itemh*l+(l-1)*e.space;var d=u+":"+l,v=false,y=0,b=0;switch(d){case"1:1":do{if(m[y][b]==0){m[y][b]="1:1";v=true;i.cobblesx=b;i.cobblesy=y}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"1:2":do{if(m[y][b]==0&&y<g-1&&m[y+1][b]==0){m[y][b]="1:2";m[y+1][b]="1:2";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"1:3":do{if(m[y][b]==0&&y<g-2&&m[y+1][b]==0&&m[y+2][b]==0){m[y][b]="1:3";m[y+1][b]="1:3";m[y+2][b]="1:3";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"2:1":do{if(m[y][b]==0&&b<e.column-1&&m[y][b+1]==0){m[y][b]="2:1";m[y][b+1]="2:1";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"3:1":do{if(m[y][b]==0&&b<e.column-2&&m[y][b+1]==0&&m[y][b+2]==0){m[y][b]="3:1";m[y][b+1]="3:1";m[y][b+2]="3:1";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"2:2":do{if(b<e.column-1&&y<g-1&&m[y][b]==0&&m[y][b+1]==0&&m[y+1][b]==0&&m[y+1][b+1]==0){m[y][b]="2:2";m[y+1][b]="2:2";m[y][b+1]="2:2";m[y+1][b+1]="2:2";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"3:2":do{if(b<e.column-2&&y<g-1&&m[y][b]==0&&m[y][b+1]==0&&m[y][b+2]==0&&m[y+1][b]==0&&m[y+1][b+1]==0&&m[y+1][b+2]==0){m[y][b]="3:2";m[y][b+1]="3:2";m[y][b+2]="3:2";m[y+1][b]="3:2";m[y+1][b+1]="3:2";m[y+1][b+2]="3:2";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"2:3":do{if(b<e.column-1&&y<g-2&&m[y][b]==0&&m[y][b+1]==0&&m[y+1][b]==0&&m[y+1][b+1]==0&&m[y+2][b+1]==0&&m[y+2][b+1]==0){m[y][b]="2:3";m[y][b+1]="2:3";m[y+1][b]="2:3";m[y+1][b+1]="2:3";m[y+2][b]="2:3";m[y+2][b+1]="2:3";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break;case"3:3":do{if(b<e.column-2&&y<g-2&&m[y][b]==0&&m[y][b+1]==0&&m[y][b+2]==0&&m[y+1][b]==0&&m[y+1][b+1]==0&&m[y+1][b+2]==0&&m[y+2][b]==0&&m[y+2][b+1]==0&&m[y+2][b+2]==0){m[y][b]="3:3";m[y][b+1]="3:3";m[y][b+2]="3:3";m[y+1][b]="3:3";m[y+1][b+1]="3:3";m[y+1][b+2]="3:3";m[y+2][b]="3:3";m[y+2][b+1]="3:3";m[y+2][b+2]="3:3";i.cobblesx=b;i.cobblesy=y;v=true}b++;if(b==e.column){b=0;y++}if(y>=g)v=true}while(!v);break}e.aspectratio=i.itemw+":"+i.itemh;punchgs.TweenLite.set(o,{width:i.itemw,height:i.itemh,overwrite:"auto"});var w=o.find(".esg-entry-media").find("img");if(w.length>0){evenImageRatio(w,e,true)}}else{var S=i.row-h*Math.floor(i.row/h);if(e.layout=="even"&&h>0){e.column=c[S][e.columnindex];i.cwidth=n.find(".esg-overflowtrick").width()-e.overflowoffset*2;i.cwidth_n_spaces=i.cwidth-(e.column-1)*e.space;i.itemw=Math.round(i.cwidth_n_spaces/e.column);i.itemh=f==0?i.cwidth_n_spaces/e.column/a:f/e.row;e.aspectratio=f==0?e.aspectratio:i.itemw+":"+i.itemh;punchgs.TweenLite.set(o,{width:i.itemw,height:i.itemh,overwrite:"auto"})}}if(e.layout=="even"){var w=o.find(".esg-entry-media").find("img");if(w.length>0)evenImageRatio(w,e,true)}else{if(o.hasClass("itemtoshow"))if(o.width()!=i.itemw||o.css("opacity")==0||o.css("visibility")=="hidden")i=prepareItemToMessure(o,i,n);else{adjustMediaSize(o,true,i,e);i.itemh=o.height()}else{adjustMediaSize(o,true,i,e);i.itemh=o.height()}}i=animateGrid(r,e,i);i.itemcounter++;if(s.height()<i.maxheight)n.trigger("itemsinposition")});e.aspectratio=e.aspectratioOrig;if(i.itemtowait==0){e.container.trigger("itemsinposition");n.find(".mainul").removeClass("gridorganising")}var S=getBestFitColumn(e,jQuery(window).width(),"id");e.column=S.column;e.columnindex=S.index;e.maxheight=i.maxheight;e.container.trigger("itemsinposition");e.inanimation=true;e.started=false;e.filterchanged=false;e.silent=false;e.silentout=false;e.changedAnim="";setOptions(n,e);var x=n.parent().parent().find(".esg-loader");if(x.length>0)punchgs.TweenLite.to(x,.2,{autoAlpha:0})}function prepareItemToMessure(e,t,n){adjustMediaSize(e,true,t,n.data("opt"));t.itemh=e.outerHeight(true);return t}function animateGrid(e,t,n){var r=jQuery(e),i=["fade","scale","vertical-flip","horizontal-flip","vertical-flipbook","horizontal-flipbook","fall","rotatefall","rotatescale","stack"],s=["horizontal-slide","horizontal-harmonica"],o=["vertical-slide","vertical-harmonica"];n.skipanim=false;n.x=Math.round(n.col*n.itemw);if(t.layout=="even"){}else{n.idealcol=0;n.backupcol=n.col;for(var u=0;u<t.column;u++)if(n.currentcolumnheight[n.idealcol]>n.currentcolumnheight[u])n.idealcol=u;n.y=n.currentcolumnheight[n.idealcol];n.x=Math.round(n.idealcol*n.itemw)+n.idealcol*t.space;n.col=n.idealcol;if(n.itemh==undefined)n.itemh=0}if(n.cobblesx!=undefined){n.x=n.cobblesx*n.cobblesorigw;n.y=n.cobblesy*n.cobblesorigh}n.waits=n.col*n.delaybasic+n.row*n.delaybasic*t.column;n.speed=t.animSpeed;n.inxrot=0;n.inyrot=0;n.outxrot=0;n.outyrot=0;n.inorigin="center center";n.outorigin="center center";n.itemh=Math.round(n.itemh);n.scale=1;n.outfade=0;n.infade=0;if(r.hasClass("itemonotherpage"))n.skipanim=true;if(n.anim=="horizontal-slide"){n.waits=0;n.hsoffset=0-n.cwidth-parseInt(t.space);n.hsoffsetout=0-n.cwidth-parseInt(t.space);if(t.oldpage!=undefined&&t.oldpage>t.currentpage){n.hsoffset=n.cwidth+parseInt(t.space);n.hsoffsetout=n.cwidth+parseInt(t.space)}}else if(n.anim=="vertical-slide"){n.waits=0;n.maxcalcheight=t.row*t.space+t.row*n.itemh;n.vsoffset=n.maxcalcheight+parseInt(t.space);n.vsoffsetout=n.maxcalcheight+parseInt(t.space);if(t.oldpage!=undefined&&t.oldpage>t.currentpage){n.vsoffset=0-n.maxcalcheight-parseInt(t.space);n.vsoffsetout=0-n.maxcalcheight-parseInt(t.space)}}n.outwaits=n.waits;if(t.layout=="even"&&n.cobblesx==undefined){n.x=n.x+n.col*t.space}if(n.cobblesx!=undefined){n.x=n.x+n.cobblesx*t.space;n.y=n.y+n.cobblesy*t.space}if(n.anim=="vertical-flip"||n.anim=="horizontal-flip"||n.anim=="vertical-flipbook"||n.anim=="horizontal-flipbook")n=fakePositions(r,n,t);if(n.anim=="vertical-flip"){n.inxrot=-180;n.outxrot=180}else if(n.anim=="horizontal-flip"){n.inyrot=-180;n.outyrot=180}n.outspeed=n.speed;if(t.animDelay=="off"){n.waits=0;n.outwaits=0}if(n.anim=="scale"){n.scale=0}else if(n.anim=="vertical-flipbook"){n.inxrot=-90;n.outxrot=90;n.inorigin="center top";n.outorigin="center bottom";n.waits=n.waits+n.speed/3;n.outfade=1;n.infade=1;n.outspeed=n.speed/1.2;n.ease="Sine.easeOut";n.easeout="Sine.easeIn";if(t.animDelay=="off"){n.waits=n.speed/3;n.outwaits=0}}else if(n.anim=="horizontal-flipbook"){n.inyrot=-90;n.outyrot=-90;n.inorigin="left center";n.outorigin="right center";n.waits=n.waits+n.speed/2.4;n.outfade=1;n.infade=1;n.outspeed=n.speed/1.2;n.ease="Sine.easeOut";n.easeout="Sine.easeIn";if(t.animDelay=="off"){n.waits=n.speed/3;n.outwaits=0}}else if(n.anim=="fall"||n.anim=="rotatefall"){n.outoffsety=100;n=fakePositions(r,n,t);n.outfade=0}if(n.anim=="rotatefall"){n.rotatez=20;n.outorigin="left top";n.outfade=1;n.outoffsety=600}else if(n.anim=="rotatescale"){n.scale=0;n.inorigin="left bottom";n.outorigin="center center";n.faeout=1;n.outoffsety=100;n=fakePositions(r,n,t)}else if(n.anim=="stack"){n.scale=0;n.inorigin="center center";n.faeout=1;n.ease="punchgs.Power3.easeOut";n=fakePositions(r,n,t);n.ease="Back.easeOut"}if(t.silent){n.waits=0;n.outwaits=0;n.speed=0;n.outspeed=0}if(t.silentout){n.outwaits=0;n.outspeed=.4;n.speed=.4;n.ease="punchgs.Power3.easeOut";n.easeout=n.ease}n.hooffset=t.overflowoffset;n.vooffset=t.overflowoffset;if(n.itemw+n.x-n.cwidth<20&&n.itemw+n.x-n.cwidth>-20){var a=n.itemw+n.x-n.cwidth;n.itemw=n.itemw-a}if((r.hasClass("itemtoshow")||r.hasClass("fitsinfilter"))&&!n.skipanim){r.addClass("isvisiblenow");if(t.layout!="even"){n.currentcolumnheight[n.idealcol]=n.currentcolumnheight[n.idealcol]+n.itemh+parseInt(t.space);if(n.ulcurheight<n.currentcolumnheight[n.idealcol]){n.ulcurheight=n.currentcolumnheight[n.idealcol]}}else{n.ulcurheight=n.y+n.itemh}if(n.maxheight<n.ulcurheight){n.maxheight=n.ulcurheight}n.itemtowait++;var f=Math.round(n.hooffset+n.x);var l=Math.round(n.vooffset+n.y);if(t.rtl=="on")f=n.ulwidth-f-n.itemw;if(r.css("opacity")==0&&n.anim=="fade"){punchgs.TweenLite.set(r,{opacity:0,autoAlpha:0,width:n.itemw,height:n.itemh,scale:1,left:f,y:0,top:l,overwrite:"all"})}else if(r.css("opacity")==0&&n.anim=="scale"){punchgs.TweenLite.set(r,{width:n.itemw,height:n.itemh,scale:0,left:f,y:0,top:l,overwrite:"all"})}else if(r.css("opacity")==0&&n.anim=="rotatescale")punchgs.TweenLite.set(r,{width:n.itemw,height:n.itemh,scale:1,left:f,top:l,xPercent:+150,yPercent:+150,rotationZ:20,overwrite:"all"});else if(r.css("opacity")==0&&n.anim=="fall")punchgs.TweenLite.set(r,{width:n.itemw,height:n.itemh,scale:.5,left:f,top:l,y:0,overwrite:"all"});else if(r.css("opacity")==0&&n.anim=="rotatefall")punchgs.TweenLite.set(r,{autoAlpha:0,width:n.itemw,height:n.itemh,left:f,rotationZ:0,top:l,y:0,overwrite:"all"});if(r.css("opacity")==0&&(n.anim=="vertical-flip"||n.anim=="horizontal-flip"||n.anim=="vertical-flipbook"||n.anim=="horizontal-flipbook"))punchgs.TweenLite.set(r,{autoAlpha:n.infade,zIndex:10,scale:1,y:0,transformOrigin:n.inorigin,rotationX:n.inxrot,rotationY:n.inyrot,width:n.itemw,height:n.itemh,left:f,top:l,overwrite:"all"});if(n.anim=="stack")punchgs.TweenLite.set(r,{zIndex:n.pageitemcounter,scale:.5,autoAlpha:1,left:f,top:l});if(n.anim=="horizontal-slide"&&r.css("opacity")==0){punchgs.TweenLite.set(r,{autoAlpha:1,left:Math.round(n.hooffset+(n.x-n.hsoffset)),top:l,width:n.itemw,height:n.itemh})}if(n.anim=="vertical-slide"&&r.css("opacity")==0)punchgs.TweenLite.set(r,{autoAlpha:1,left:f,top:Math.round(n.vooffset+n.y-n.vsoffset),width:n.itemw,height:n.itemh});var c=r.find(".esg-entry-cover");var h=r.find(".esg-entry-media");if(c&&h){var p=h.height();var d=r.find(".esg-cc");punchgs.TweenLite.to(c,.01,{height:p,ease:n.ease,delay:n.waits});punchgs.TweenLite.to(d,.01,{top:(p-d.height())/2,ease:n.ease,delay:n.waits})}punchgs.TweenLite.to(r,n.speed,{force3D:"auto",autoAlpha:1,scale:1,transformOrigin:n.inorigin,rotationX:0,rotationY:0,y:0,x:0,xPercent:0,yPercent:0,z:.1,rotationZ:0,left:f,top:l,ease:n.ease,delay:n.waits,onComplete:function(){if(r.hasClass("itemtoshow")){punchgs.TweenLite.set(r,{autoAlpha:1,overwrite:"all"})}n.itemtowait--;if(n.itemtowait==0){t.container.trigger("itemsinposition");r.closest(".mainul").removeClass("gridorganising")}}});if(r.find("iframe").length>0){r.find("iframe").each(function(){var e=jQuery(this);var n=Math.round(e.data("neww"));var i=Math.round(e.data("newh"));if(t.layout!="even"){punchgs.TweenLite.set(r.find(".esg-media-poster"),{width:n,height:i});punchgs.TweenLite.set(r.find("iframe"),{width:n,height:i})}else{punchgs.TweenLite.set(r.find(".esg-media-poster"),{width:"100%",height:"100%"});punchgs.TweenLite.set(r.find("iframe"),{width:"100%",height:"100%"})}})}if(r.find(".video-eg").length>0){r.find(".video-eg").each(function(){var e=jQuery(this);var n=e.data("neww");var i=e.data("newh");if(t.layout!="even"){punchgs.TweenLite.set(r.find(".esg-media-poster"),{width:n,height:i});punchgs.TweenLite.set(r.find(".esg-entry-media"),{width:n,height:i});punchgs.TweenLite.set(r.find(".video-eg"),{width:n,height:i})}else{punchgs.TweenLite.set(r.find(".esg-media-poster"),{width:"100%",height:"100%"});punchgs.TweenLite.set(r.find(".esg-entry-media"),{width:"100%",height:"100%"});punchgs.TweenLite.set(r.find(".video-eg"),{width:"100%",height:"100%"})}})}if(t.layout=="masonry")n.col=n.backupcol;n=shiftGrid(n,t,r)}else{n.itemouttowait++;punchgs.TweenLite.set(r,{zIndex:5});r.removeClass("isvisiblenow");if(r.css("opacity")>0){if(n.anim=="stack"){punchgs.TweenLite.set(r,{zIndex:n.pageitemcounterfake+100});punchgs.TweenLite.to(r,n.outspeed/2,{force3D:"auto",x:-20-n.itemw,rotationY:30,rotationX:10,ease:Sine.easeInOut,delay:n.outwaits});punchgs.TweenLite.to(r,.01,{force3D:"auto",zIndex:n.pageitemcounterfake,delay:n.outwaits+n.outspeed/3});punchgs.TweenLite.to(r,n.outspeed*.2,{force3D:"auto",delay:n.outwaits+n.outspeed*.9,autoAlpha:0,ease:Sine.easeInOut});punchgs.TweenLite.to(r,n.outspeed/3,{zIndex:2,force3D:"auto",x:0,scale:.9,rotationY:0,rotationX:0,ease:Sine.easeInOut,delay:n.outwaits+n.outspeed/1.4,onComplete:function(){if(!r.hasClass("itemtoshow"))punchgs.TweenLite.set(r,{autoAlpha:0,overwrite:"all",display:"none"});n.itemouttowait--;if(n.itemouttowait==0){t.container.trigger("itemsinposition")}}});}else if(n.anim=="horizontal-flipbook"||n.anim=="vertical-flipbook"){punchgs.TweenLite.to(r,n.outspeed,{force3D:"auto",zIndex:2,scale:n.scale,autoAlpha:n.outfade,transformOrigin:n.outorigin,rotationX:n.outxrot,rotationY:n.outyrot,ease:n.easeout,delay:n.outwaits,onComplete:function(){if(!r.hasClass("itemtoshow"))punchgs.TweenLite.set(r,{autoAlpha:0,overwrite:"all",display:"none"});n.itemouttowait--;if(n.itemouttowait==0){t.container.trigger("itemsinposition")}}})}else if(n.anim=="fall")punchgs.TweenLite.to(r,n.outspeed,{zIndex:2,force3D:"auto",y:n.outoffsety,autoAlpha:0,ease:n.easeout,delay:n.outwaits,onComplete:function(){if(!r.hasClass("itemtoshow"))punchgs.TweenLite.set(r,{autoAlpha:0,overwrite:"all",display:"none"});n.itemouttowait--;if(n.itemouttowait==0){t.container.trigger("itemsinposition")}}});else if(n.anim=="horizontal-slide")punchgs.TweenLite.to(r,n.outspeed,{zIndex:2,force3D:"auto",autoAlpha:1,left:n.hooffset+r.position().left+n.hsoffsetout,top:n.vooffset+r.position().top,ease:n.easeout,delay:n.outwaits,onComplete:function(){punchgs.TweenLite.set(r,{autoAlpha:0,overwrite:"all",display:"none"});n.itemouttowait--;if(n.itemouttowait==0){t.container.trigger("itemsinposition")}}});else if(n.anim=="vertical-slide")punchgs.TweenLite.to(r,n.outspeed,{zIndex:2,force3D:"auto",autoAlpha:1,left:n.hooffset+r.position().left,top:n.vooffset+r.position().top+n.vsoffsetout,ease:n.easeout,delay:n.outwaits,onComplete:function(){punchgs.TweenLite.set(r,{autoAlpha:0,overwrite:"all",display:"none"});n.itemouttowait--;if(n.itemouttowait==0){t.container.trigger("itemsinposition")}}});else if(n.anim=="rotatefall"&&r.css("opacity")>0){punchgs.TweenLite.set(r,{zIndex:300-n.item});punchgs.TweenLite.to(r,n.outspeed/2,{force3D:"auto",transformOrigin:n.outorigin,ease:"punchgs.Bounce.easeOut",rotationZ:n.rotatez,delay:n.outwaits});punchgs.TweenLite.to(r,n.outspeed/2,{zIndex:2,force3D:"auto",autoAlpha:0,y:n.outoffsety,ease:punchgs.Power3.easeIn,delay:n.outwaits+n.outspeed/3})}else punchgs.TweenLite.to(r,n.outspeed,{force3D:"auto",zIndex:2,scale:n.scale,autoAlpha:n.outfade,transformOrigin:n.outorigin,rotationX:n.outxrot,rotationY:n.outyrot,ease:n.easeout,delay:n.outwaits,onComplete:function(){if(!r.hasClass("itemtoshow"))punchgs.TweenLite.set(r,{autoAlpha:0,overwrite:"all",display:"none"});n.itemouttowait--;if(n.itemouttowait==0){t.container.trigger("itemsinposition")}}})}else{punchgs.TweenLite.set(r,{zIndex:2,scale:n.scale,autoAlpha:0,transformOrigin:n.outorigin,rotationX:n.outxrot,rotationY:n.outyrot,onComplete:function(){if(!r.hasClass("itemtoshow"))punchgs.TweenLite.set(r,{autoAlpha:0,overwrite:"all",display:"none"});n.itemouttowait--;if(n.itemouttowait==0){t.container.trigger("itemsinposition")}}})}n=shiftGridFake(n,t)}return n}function fakePositions(e,t,n){if((e.hasClass("itemtoshow")||e.hasClass("fitsinfilter"))&&!t.skipanim){}else{var r=e.data("col");var i=e.data("row");if(r==undefined||i==undefined){if(t.x!=0&&t.y!=0){t.x=Math.round(t.fakecol*t.itemw);t.y=t.fakey;r=t.fakecol;i=t.fakerow;e.data("col",t.fakecol);e.data("row",t.fakerow)}}if(t.anim=="rotatefall"){t.outwaits=(n.column-r)*t.delaybasic+i*t.delaybasic*n.column}else{t.outwaits=r*t.delaybasic+i*t.delaybasic*n.column}}return t}function shiftGrid(e,t,n){n.data("col",e.col);n.data("row",e.row);e.pageitemcounter++;e.col=e.col+e.verticalsteps;e.allcol++;if(e.col==t.column){e.col=0;e.row++;e.allrow++;e.y=parseFloat(e.y)+parseFloat(e.itemh)+parseFloat(t.space);if(e.row==t.row){e.row=0;if(e.pageitemcounter>=t.column*t.row)e.pageitemcounter=0;e.pagetoanimate=e.pagetoanimate+1;e.pagecounter++;if(e.pageitemcounter==0)for(var r=0;r<t.column;r++)e.currentcolumnheight[r]=0}}return e}function shiftGridFake(e,t){e.fakecol=e.fakecol+1;e.pageitemcounterfake++;if(e.fakecol==t.column){e.fakecol=0;e.fakerow++;e.fakey=e.fakey+e.itemh+t.space;if(e.fakerow==t.row){e.fakerow=0;e.pageitemcounterfake=0;}}return e}function loadVideoApis(e,t){var n=0;var r=0;var i=0;var s=0;var o="http";if(location.protocol==="https:"){o="https"}e.find("iframe").each(function(e){try{if(jQuery(this).attr("src").indexOf("you")>0&&n==0){n=1;var t=document.createElement("script");var r="https";t.src=r+"://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];var s=true;jQuery("head").find("*").each(function(){if(jQuery(this).attr("src")==r+"://www.youtube.com/iframe_api")s=false});if(s){i.parentNode.insertBefore(t,i)}}}catch(o){}});e.find("iframe").each(function(e){try{if(jQuery(this).attr("src").indexOf("vim")>0&&r==0){r=1;var t=document.createElement("script");t.src=o+"://a.vimeocdn.com/js/froogaloop2.min.js";var n=document.getElementsByTagName("script")[0];var i=true;jQuery("head").find("*").each(function(){if(jQuery(this).attr("src")==o+"://a.vimeocdn.com/js/froogaloop2.min.js")i=false});if(i)n.parentNode.insertBefore(t,n)}}catch(s){}});e.find("iframe").each(function(e){try{if(jQuery(this).attr("src").indexOf("soundcloud")>0&&s==0){s=1;var t=document.createElement("script");t.src=o+"://w.soundcloud.com/player/api.js";var n=document.getElementsByTagName("script")[0];var r=true;jQuery("head").find("*").each(function(){if(jQuery(this).attr("src")==o+"://w.soundcloud.com/player/api.js")r=false});if(r)n.parentNode.insertBefore(t,n)}}catch(i){}});var u={youtube:n,vimeo:r,soundcloud:s,htmlvid:i};return u}function toHHMMSS(){var e=new Date;var t=Math.floor(e)/1e3;var n=Math.floor(t/60);var r=Math.floor(n/60);var i=Math.floor(r/24);var r=r-i*24;var n=n-i*24*60-r*60;var t=t-i*24*60*60-r*60*60-n*60;return r+":"+n+":"+t}function stopAllVideos(e,t,n){var r=".isplaying";if(e)r="";jQuery(".esg-youtubevideo.haslistener"+r).each(function(t){var r=jQuery(this);var i=r.data("player");if(n!=r.attr("id")){i.pauseVideo();if(e)forceVideoInPause(r,true,i,"youtube")}});jQuery(".esg-vimeovideo.haslistener"+r).each(function(t){var r=jQuery(this);var i=r.attr("id");var s=$f(i);if(n!=i){s.api("pause");if(e)forceVideoInPause(r,true,s,"vimeo")}});jQuery(".esg-htmlvideo.haslistener"+r).each(function(t){var r=jQuery(this);var i=r.attr("id");var s=document.getElementById(i);if(n!=i){s.pause();if(e)forceVideoInPause(r,true,s,"html5vid")}});jQuery(".esg-soundcloud"+r).each(function(t){var r=jQuery(this);var i=r.data("player");if(n!=r.attr("id")){i.pause();if(e)forceVideoInPause(r,true,i,"soundcloud")}})}function forceVideoInPause(e,t,n,r){e.removeClass("isplaying");var i=e.closest(".tp-esg-item");if(i.find(".esg-media-video").length>0&&!jQuery("body").data("fullScreenMode")){var s=i.find(".esg-entry-cover");var o=i.find(".esg-media-poster");if(o.length>0){if(!is_mobile()){punchgs.TweenLite.to(s,.5,{autoAlpha:1});punchgs.TweenLite.to(o,.5,{autoAlpha:1});punchgs.TweenLite.to(e,.5,{autoAlpha:0})}else{punchgs.TweenLite.set(s,{autoAlpha:1});punchgs.TweenLite.set(o,{autoAlpha:1});punchgs.TweenLite.set(e,{autoAlpha:0})}if(t){if(r=="youtube")try{n.destroy()}catch(u){}else if(r=="vimeo")try{n.api("unload")}catch(u){}else if(r!="html5vid"){e.removeClass("haslistener");e.removeClass("readytoplay")}}else{setTimeout(function(){if(!is_mobile())e.css({display:"none"})},500)}}}}function onPlayerStateChange(e){var t=e.target.getVideoEmbedCode();var n=jQuery("#"+t.split('id="')[1].split('"')[0]);var r=n.data("player");if(e.data==YT.PlayerState.PLAYING){r.setPlaybackQuality("hd1080");stopAllVideos(true,false,n.attr("id"));n.addClass("isplaying");n.removeClass("isinpause")}if(e.data==2){forceVideoInPause(n)}if(e.data==0){forceVideoInPause(n)}}function vimeoready_auto(e){var t=$f(e);var n=jQuery("#"+e);t.addEvent("ready",function(r){n.addClass("readytoplay");t.addEvent("play",function(t){stopAllVideos(true,false,e);n.addClass("isplaying");n.removeClass("isinpause")});t.addEvent("finish",function(e){forceVideoInPause(n);n.removeClass("isplaying")});t.addEvent("pause",function(e){forceVideoInPause(n);n.removeClass("isplaying")})})}function addEvent(e,t,n){if(e.addEventListener)e.addEventListener(t,n,false);else e.attachEvent(t,n,false)}function html5vidready(e,t,n){t.addClass("readytoplay");t.on("play",function(){stopAllVideos(true,false,n);t.addClass("isplaying");t.removeClass("isinpause")});t.on("pause",function(){forceVideoInPause(t);t.removeClass("isplaying")});t.on("ended",function(){forceVideoInPause(t);t.removeClass("isplaying")})}function prepareYT(e){var t="ytiframe"+Math.round(Math.random()*1e5+1);if(!e.hasClass("haslistener")&&typeof YT!="undefined"){try{e.attr("id",t);var n=new YT.Player(t,{events:{onStateChange:onPlayerStateChange}});e.data("player",n);e.addClass("haslistener").addClass("esg-youtubevideo")}catch(r){return false}}else{var n=e.data("player");if(n!=undefined)if(typeof n.playVideo=="function")return true;else return false;else return false}}function playYT(e){var t=e.data("player");if(t!=undefined)if(typeof t.playVideo=="function")t.playVideo()}function prepareVimeo(e){if(!e.hasClass("haslistener")&&typeof $f!="undefined"){try{var t="vimeoiframe"+Math.round(Math.random()*1e5+1);e.attr("id",t);var n=e.attr("src");var r={},i=n,s=/([^&=]+)=([^&]*)/g,o;while(o=s.exec(i)){r[decodeURIComponent(o[1])]=decodeURIComponent(o[2])}if(r["player_id"]!=undefined)n=n.replace(r["player_id"],t);else n=n+"&player_id="+t;try{n=n.replace("api=0","api=1")}catch(u){}n=n+"&api=1";e.attr("src",n);var a=e[0];$f(a).addEvent("ready",function(){vimeoready_auto(t)});e.addClass("haslistener").addClass("esg-vimeovideo")}catch(u){return false}}else{if(typeof $f!=undefined&&typeof $f!="undefined"){var f=$f(e.attr("id"));if(typeof f.api=="function"&&e.hasClass("readytoplay"))return true;else return false}else{return false}}}function playVimeo(e){var t=$f(e.attr("id"));t.api("play")}function prepareSoundCloud(e){if(e.data("player")==undefined&&typeof SC!="undefined"){var t="sciframe"+Math.round(Math.random()*1e5+1);try{e.attr("id",t);var n=SC.Widget(t);n.bind(SC.Widget.Events.PLAY,function(){stopAllVideos(true,false,e.attr("id"));e.addClass("isplaying");e.removeClass("isinpause")});n.bind(SC.Widget.Events.PAUSE,function(){forceVideoInPause(e);e.removeClass("isplaying")});n.bind(SC.Widget.Events.FINISH,function(){forceVideoInPause(e);e.removeClass("isplaying")});e.data("player",n);e.addClass("haslistener").addClass("esg-soundcloud")}catch(r){return false}}else{var n=e.data("player");if(n!=undefined){if(typeof n.getVolume=="function"){return true}else{return false}}else return false}}function playSC(e){var t=e.data("player");if(t!=undefined){if(typeof t.getVolume=="function"){setTimeout(function(){t.play()},500)}}}function prepareVideo(e){if(!e.hasClass("haslistener")){var t="videoid_"+Math.round(Math.random()*1e5+1);e.attr("id",t);var n=document.getElementById(t);n.oncanplay=html5vidready(n,e,t);e.addClass("haslistener").addClass("esg-htmlvideo")}else{try{var r=e.attr("id");var n=document.getElementById(r);if(typeof n.play=="function"&&e.hasClass("readytoplay"))return true;else return false}catch(i){return false}}}function playVideo(e){var t=e.attr("id");var n=document.getElementById(t);n.play()}var esgAnimmatrix=[[".esg-none",0,{autoAlpha:1,rotationZ:0,x:0,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0},{autoAlpha:1,ease:punchgs.Power2.easeOut,overwrite:"all"},0,{autoAlpha:1,overwrite:"all"}],[".esg-fade",.3,{autoAlpha:0,rotationZ:0,x:0,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0},{autoAlpha:1,ease:punchgs.Power2.easeOut,overwrite:"all"},.3,{autoAlpha:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-fadeout",.3,{autoAlpha:1,ease:punchgs.Power2.easeOut,overwrite:"all"},{autoAlpha:0,rotationZ:0,x:0,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0},.3,{autoAlpha:1,rotationZ:0,x:0,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-covergrowup",.3,{autoAlpha:1,top:"100%",marginTop:-10,rotationZ:0,x:0,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0},{autoAlpha:1,top:"0%",marginTop:0,ease:punchgs.Power2.easeOut,overwrite:"all"},.3,{autoAlpha:1,top:"100%",marginTop:-10,bottom:0,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"},true],[".esg-flipvertical",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,rotationX:180,autoAlpha:0,z:-.001,transformOrigin:"50% 50%"},{rotationX:0,autoAlpha:1,scale:1,z:.001,ease:punchgs.Power3.easeInOut,overwrite:"all"},.5,{rotationX:180,autoAlpha:0,scale:1,z:-.001,ease:punchgs.Power3.easeInOut,overwrite:"all"},true],[".esg-flipverticalout",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,rotationX:0,autoAlpha:1,z:.001,transformOrigin:"50% 50%"},{rotationX:-180,scale:1,autoAlpha:0,z:-150,ease:punchgs.Power3.easeInOut,overwrite:"all"},.5,{rotationX:0,autoAlpha:1,scale:1,z:0,ease:punchgs.Power3.easeInOut,overwrite:"all"}],[".esg-fliphorizontal",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,rotationY:180,autoAlpha:0,z:-.001,transformOrigin:"50% 50%"},{rotationY:0,autoAlpha:1,scale:1,z:.001,ease:punchgs.Power3.easeInOut,overwrite:"all"},.5,{rotationY:180,autoAlpha:0,scale:1,z:-.001,ease:punchgs.Power3.easeInOut,overwrite:"all"},true],[".esg-fliphorizontalout",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,z:.001,transformOrigin:"50% 50%"},{rotationY:-180,scale:1,autoAlpha:0,z:-150,ease:punchgs.Power3.easeInOut,overwrite:"all"},.5,{rotationY:0,autoAlpha:1,scale:1,z:.001,ease:punchgs.Power3.easeInOut,overwrite:"all"}],[".esg-flipup",.5,{x:0,y:0,scale:.8,rotationZ:0,rotationX:90,rotationY:0,skewX:0,skewY:0,autoAlpha:0,z:.001,transformOrigin:"50% 100%"},{scale:1,rotationX:0,autoAlpha:1,z:.001,ease:punchgs.Power2.easeOut,overwrite:"all"},.3,{scale:.8,rotationX:90,autoAlpha:0,z:.001,ease:punchgs.Power2.easeOut,overwrite:"all"},true],[".esg-flipupout",.5,{rotationX:0,autoAlpha:1,y:0,ease:punchgs.Bounce.easeOut,overwrite:"all"},{x:0,y:0,scale:1,rotationZ:0,rotationX:-90,rotationY:0,skewX:0,skewY:0,autoAlpha:1,z:.001,transformOrigin:"50% 0%"},.3,{rotationX:0,autoAlpha:1,y:0,ease:punchgs.Bounce.easeOut,overwrite:"all"}],[".esg-flipdown",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:-90,rotationY:0,skewX:0,skewY:0,autoAlpha:0,z:.001,transformOrigin:"50% 0%"},{rotationX:0,autoAlpha:1,y:0,ease:punchgs.Bounce.easeOut,overwrite:"all"},.3,{rotationX:-90,z:0,ease:punchgs.Power2.easeOut,autoAlpha:0,overwrite:"all"},true],[".esg-flipdownout",.5,{scale:1,rotationX:0,autoAlpha:1,z:.001,ease:punchgs.Power2.easeOut,overwrite:"all"},{x:0,y:0,scale:.8,rotationZ:0,rotationX:90,rotationY:0,skewX:0,skewY:0,autoAlpha:0,z:.001,transformOrigin:"50% 100%"},.3,{scale:1,rotationX:0,autoAlpha:1,z:.001,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-flipright",.5,{x:0,y:0,scale:.8,rotationZ:0,rotationX:0,rotationY:90,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"0% 50%"},{scale:1,rotationY:0,autoAlpha:1,ease:punchgs.Power2.easeOut,overwrite:"all"},.3,{autoAlpha:0,scale:.8,rotationY:90,ease:punchgs.Power3.easeOut,overwrite:"all"},true],[".esg-fliprightout",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,rotationY:0,autoAlpha:1,transformOrigin:"100% 50%"},{scale:1,rotationY:-90,autoAlpha:0,ease:punchgs.Power2.easeOut,overwrite:"all"},.3,{scale:1,z:0,rotationY:0,autoAlpha:1,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-flipleft",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:-90,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"100% 50%"},{rotationY:0,autoAlpha:1,z:.001,scale:1,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,rotationY:-90,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"},true],[".esg-flipleftout",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,rotationY:0,autoAlpha:1,transformOrigin:"0% 50%"},{scale:1,rotationY:90,autoAlpha:0,ease:punchgs.Power2.easeOut,overwrite:"all"},.3,{scale:1,z:0,rotationY:0,autoAlpha:1,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-turn",.5,{x:50,y:0,scale:0,rotationZ:0,rotationX:0,rotationY:-40,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{scale:1,x:0,rotationY:0,autoAlpha:1,ease:punchgs.Power3.easeInOut,overwrite:"all"},.3,{scale:0,rotationY:-40,autoAlpha:1,z:0,x:50,ease:punchgs.Power3.easeInOut,overwrite:"all"},true],[".esg-turnout",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{scale:1,rotationY:40,scale:.6,autoAlpha:0,x:-50,ease:punchgs.Power3.easeInOut,overwrite:"all"},.3,{scale:1,rotationY:0,z:0,autoAlpha:1,x:0,rotationX:0,rotationZ:0,ease:punchgs.Power3.easeInOut,overwrite:"all"}],[".esg-slide",.5,{x:-1e4,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{autoAlpha:1,x:0,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:1,x:-1e4,y:0,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideout",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{autoAlpha:1,x:0,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:1,x:0,y:0,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideright",.5,{xPercent:-50,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,xPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,xPercent:-50,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-sliderightout",.5,{autoAlpha:1,xPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{xPercent:50,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,xPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-scaleleft",.5,{x:0,y:0,scaleX:0,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"100% 50%"},{autoAlpha:1,x:0,scaleX:1,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:1,x:0,z:0,scaleX:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-scaleright",.5,{x:0,y:0,scaleX:0,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"0% 50%"},{autoAlpha:1,x:0,scaleX:1,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:1,x:0,z:0,scaleX:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideleft",.5,{xPercent:50,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,xPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,xPercent:50,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideleftout",.5,{autoAlpha:1,xPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{xPercent:-50,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,xPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-slideup",.5,{x:0,yPercent:50,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,yPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,yPercent:50,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideupout",.5,{autoAlpha:1,yPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{x:0,yPercent:-50,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,yPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-slidedown",.5,{x:0,yPercent:-50,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,yPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,yPercent:-50,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slidedownout",.5,{autoAlpha:1,yPercent:0,z:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{x:0,yPercent:50,scale:1,rotationZ:0,rotationX:0,z:10,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,yPercent:0,z:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-slideshortright",.5,{x:-30,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,x:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,x:-30,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideshortrightout",.5,{autoAlpha:1,x:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{x:30,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,x:30,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-slideshortleft",.5,{x:30,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,x:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,x:30,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideshortleftout",.5,{autoAlpha:1,x:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{x:-30,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,x:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-slideshortup",.5,{x:0,y:30,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,y:30,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideshortupout",.5,{autoAlpha:1,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{x:0,y:-30,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-slideshortdown",.5,{x:0,y:-30,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,y:-30,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-slideshortdownout",.5,{autoAlpha:1,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{x:0,y:30,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-skewright",.5,{xPercent:-100,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:60,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,xPercent:0,skewX:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,skewX:-60,xPercent:-100,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-skewrightout",.5,{autoAlpha:1,xPercent:0,skewX:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{xPercent:100,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:-60,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,xPercent:0,skewX:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-skewleft",.5,{xPercent:100,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:-60,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,xPercent:0,skewX:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,xPercent:100,z:0,skewX:60,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-skewleftout",.5,{autoAlpha:1,xPercent:0,skewX:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{xPercent:-100,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:60,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.3,{autoAlpha:1,xPercent:0,skewX:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-shifttotop",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{autoAlpha:1,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:1,y:0,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-rollleft",.5,{xPercent:50,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,rotationZ:90,transformOrigin:"50% 50%"},{autoAlpha:1,xPercent:0,rotationZ:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,xPercent:50,z:0,rotationZ:90,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-rollleftout",.5,{autoAlpha:1,xPercent:0,rotationZ:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{xPercent:50,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,rotationZ:90,transformOrigin:"50% 50%"},.3,{autoAlpha:1,xPercent:0,rotationZ:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-rollright",.5,{xPercent:-50,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,rotationZ:-90,transformOrigin:"50% 50%"},{autoAlpha:1,xPercent:0,rotationZ:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{autoAlpha:0,xPercent:-50,rotationZ:-90,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-rollrightout",.5,{autoAlpha:1,xPercent:0,rotationZ:0,ease:punchgs.Power3.easeOut,overwrite:"all"},{xPercent:-50,y:0,scale:1,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,rotationZ:-90,transformOrigin:"50% 50%"},.3,{autoAlpha:1,xPercent:0,rotationZ:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-falldown",.4,{x:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,yPercent:-100},{autoAlpha:1,yPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.4,{yPercent:-100,autoAlpha:0,z:0,ease:punchgs.Power2.easeOut,delay:.2,overwrite:"all"}],[".esg-falldownout",.4,{autoAlpha:1,yPercent:0,ease:punchgs.Back.easeOut,overwrite:"all"},{x:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,yPercent:100},.4,{autoAlpha:1,yPercent:0,ease:punchgs.Power3.easeOut,overwrite:"all"}],[".esg-rotatescale",.3,{x:0,y:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,rotationZ:80,scale:.6,transformOrigin:"50% 50%"},{autoAlpha:1,scale:1,rotationZ:0,ease:punchgs.Back.easeOut,overwrite:"all"},.3,{autoAlpha:0,scale:.6,z:0,rotationZ:80,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-rotatescaleout",.3,{autoAlpha:1,scale:1,rotationZ:0,ease:punchgs.Back.easeOut,overwrite:"all"},{x:0,y:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,rotationZ:80,scale:.6,transformOrigin:"50% 50%"},.3,{autoAlpha:1,scale:1,rotationZ:0,ease:punchgs.Back.easeOut,overwrite:"all"}],[".esg-zoomintocorner",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"20% 50%"},{autoAlpha:1,scale:1.2,x:0,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.5,{autoAlpha:0,x:0,y:0,scale:1,autoAlpha:1,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-zoomouttocorner",.5,{x:0,y:0,scale:1.2,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"80% 50%"},{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.5,{autoAlpha:0,x:0,y:0,scale:1.2,autoAlpha:1,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-zoomtodefault",.5,{x:0,y:0,scale:1.2,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.5,{autoAlpha:0,x:0,y:0,scale:1.2,autoAlpha:1,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-zoomback",.5,{x:0,y:0,scale:.2,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Back.easeOut,overwrite:"all"},.5,{autoAlpha:0,x:0,y:0,scale:.2,autoAlpha:0,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-zoombackout",.5,{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Back.easeOut,overwrite:"all"},{x:0,y:0,scale:.2,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.5,{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Back.easeOut,overwrite:"all"}],[".esg-zoomfront",.5,{x:0,y:0,scale:1.5,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Power3.easeOut,overwrite:"all"},.5,{autoAlpha:0,x:0,y:0,scale:1.5,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-zoomfrontout",.5,{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Back.easeOut,overwrite:"all"},{x:0,y:0,scale:1.5,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:0,transformOrigin:"50% 50%"},.5,{autoAlpha:1,scale:1,x:0,y:0,ease:punchgs.Back.easeOut,overwrite:"all"}],[".esg-flyleft",.8,{x:-80,y:0,z:0,scale:.3,rotationZ:0,rotationY:75,rotationX:10,skewX:0,skewY:0,autoAlpha:.01,transformOrigin:"30% 10%"},{x:0,y:0,rotationY:0,z:.001,rotationX:0,rotationZ:0,autoAlpha:1,scale:1,x:0,y:0,z:0,ease:punchgs.Power3.easeInOut,overwrite:"all"},.8,{autoAlpha:.01,x:-40,y:0,z:300,rotationY:60,rotationX:20,overwrite:"all"}],[".esg-flyleftout",.8,{x:0,y:0,rotationY:0,z:.001,rotationX:0,rotationZ:0,autoAlpha:1,scale:1,x:0,y:0,z:0,ease:punchgs.Power3.easeInOut,overwrite:"all"},{x:-80,y:0,z:0,scale:.3,rotationZ:0,rotationY:75,rotationX:10,skewX:0,skewY:0,autoAlpha:.01,transformOrigin:"30% 10%"},.8,{x:0,y:0,rotationY:0,z:.001,rotationX:0,rotationZ:0,autoAlpha:1,scale:1,x:0,y:0,z:0,ease:punchgs.Power3.easeInOut,overwrite:"all"}],[".esg-flyright",.8,{scale:1,skewX:0,skewY:0,autoAlpha:0,x:80,y:0,z:0,scale:.3,rotationZ:0,rotationY:-75,rotationX:10,transformOrigin:"70% 20%"},{x:0,y:0,rotationY:0,z:.001,rotationX:0,autoAlpha:1,scale:1,x:0,y:0,z:0,ease:punchgs.Power3.easeInOut,overwrite:"all"},.8,{autoAlpha:0,x:40,y:-40,z:300,rotationY:-60,rotationX:-40,overwrite:"all"}],[".esg-flyrightout",.8,{x:0,y:0,rotationY:0,z:.001,rotationX:0,autoAlpha:1,scale:1,x:0,y:0,z:0,ease:punchgs.Power3.easeInOut,overwrite:"all"},{scale:1,skewX:0,skewY:0,autoAlpha:0,x:80,y:0,z:0,scale:.3,rotationZ:0,rotationY:-75,rotationX:10,transformOrigin:"70% 20%"},.8,{x:0,y:0,rotationY:0,z:.001,rotationX:0,autoAlpha:1,scale:1,x:0,y:0,z:0,ease:punchgs.Power3.easeInOut,overwrite:"all"}],[".esg-mediazoom",.3,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{autoAlpha:1,scale:1.4,x:0,y:0,ease:punchgs.Back.easeOut,overwrite:"all"},.3,{autoAlpha:0,x:0,y:0,scale:1,z:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-zoomandrotate",.6,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{autoAlpha:1,scale:1.4,x:0,y:0,rotationZ:30,ease:punchgs.Power2.easeOut,overwrite:"all"},.4,{x:0,y:0,scale:1,z:0,rotationZ:0,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-pressback",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"50% 50%"},{rotationY:0,autoAlpha:1,scale:.8,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{rotationY:0,autoAlpha:1,z:0,scale:1,ease:punchgs.Power2.easeOut,overwrite:"all"}],[".esg-3dturnright",.5,{x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,transformPerspective:600},{x:-40,y:0,scale:.8,rotationZ:2,rotationX:5,rotationY:-28,skewX:0,skewY:0,autoAlpha:1,transformOrigin:"100% 50% 40%",transformPerspective:600,ease:punchgs.Power3.easeOut,overwrite:"all"},.3,{z:0,x:0,y:0,scale:1,rotationZ:0,rotationX:0,rotationY:0,skewX:0,skewY:0,autoAlpha:1,force3D:"auto",ease:punchgs.Power2.easeOut,overwrite:"all"},true]];jQuery.fn.extend({tpessential:function(e){jQuery.fn.tpessential.defaults={forceFullWidth:"off",forceFullScreen:"off",fullScreenOffsetContainer:"",row:3,column:4,space:10,pageAnimation:"fade",animSpeed:600,delayBasic:.08,smartPagination:"on",paginationScrollToTop:"off",paginationScrollToTopOffset:200,layout:"even",rtl:"off",aspectratio:"16:9",bgPosition:"center center",bgSize:"cover",videoJsPath:"",overflowoffset:0,mainhoverdelay:0,rowItemMultiplier:[],filterGroupClass:"",filterType:"",filterLogic:"or",evenGridMasonrySkinPusher:"on",loadMoreType:"none",loadMoreItems:[],loadMoreAmount:5,loadMoreTxt:"Load More",loadMoreNr:"on",loadMoreEndTxt:"No More Items for the Selected Filter",loadMoreAjaxUrl:"",loadMoreAjaxToken:"",loadMoreAjaxAction:"",lazyLoad:"off",lazyLoadColor:"#ff0000",gridID:0,spinner:"",spinnerColor:"",lightBoxMode:"single",cobblesPattern:"",googleFonts:"",googleFontJS:"//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",ajaxContentTarget:"",ajaxScrollToOnLoad:"off",ajaxScrollToOffset:100,ajaxCallback:"",ajaxCallbackArgument:"on",ajaxCssUrl:"",ajaxJsUrl:"",ajaxCloseButton:"on",ajaxNavButton:"on",ajaxCloseTxt:"Close",ajaxCloseType:"type1",ajaxClosePosition:"tr",ajaxCloseInner:"true",ajaxCloseStyle:"light",ajaxTypes:[]};e=jQuery.extend({},jQuery.fn.tpessential.defaults,e);if(typeof WebFontConfig=="undefined")WebFontConfig=new Object;return this.each(function(){var t=e;var n=jQuery(this);if(n==undefined)return false;n.parent().css({position:"relative"});if(t.layout=="cobbles"){t.layout="even";t.evenCobbles="on"}else{t.evenCobbles="off"}if(t.get!="true"&&t.get!=true){t.get=true;if(t.filterGroupClass==undefined||t.filterGroupClass.length==0){t.filterGroupClass="#"+n.attr("id")}else t.filterGroupClass="."+t.filterGroupClass;if(window.tplogs==true)try{console.groupCollapsed("Essential Grid  1.2.1 Initialisation on "+n.attr("id"));console.groupCollapsed("Used Options:");console.info(e);console.groupEnd();console.groupCollapsed("Tween Engine:")}catch(r){}if(punchgs.TweenLite==undefined){if(window.tplogs==true)try{console.error("GreenSock Engine Does not Exist!")}catch(r){}return false}punchgs.force3D=true;if(window.tplogs==true)try{console.info("GreenSock Engine Version in Essential Grid:"+punchgs.TweenLite.version)}catch(r){}punchgs.TweenLite.lagSmoothing(2e3,16);punchgs.force3D="auto";if(window.tplogs==true)try{console.groupEnd();console.groupEnd()}catch(r){}jQuery("body").data("fullScreenMode",false);jQuery(window).on("mozfullscreenchange webkitfullscreenchange fullscreenchange",function(){jQuery("body").data("fullScreenMode",!jQuery("body").data("fullScreenMode"))});buildLoader(n.parent(),t);if(t.firstshowever==undefined)jQuery(t.filterGroupClass+".esg-navigationbutton,"+t.filterGroupClass+" .esg-navigationbutton").css({visibility:"hidden"});n.parent().append('<div class="esg-relative-placeholder" style="width:100%;height:auto"></div>');n.wrap('<div class="esg-container-fullscreen-forcer" style="position:relative;left:0px;top:0px;width:100%;height:auto;"></div>');var i=n.parent().parent().find(".esg-relative-placeholder").offset().left;if(t.forceFullWidth=="on"||t.forceFullScreen=="on")n.closest(".esg-container-fullscreen-forcer").css({left:0-i,width:jQuery(window).width()});t.animDelay=t.delayBasic==0?"off":"on";t.container=n;n.find("ul").first().addClass("mainul").wrap('<div class="esg-overflowtrick"></div>');var s=jQuery(t.filterGroupClass+".esg-navbutton-solo-left,"+t.filterGroupClass+" .esg-navbutton-solo-left");var o=jQuery(t.filterGroupClass+".esg-navbutton-solo-right,"+t.filterGroupClass+" .esg-navbutton-solo-right");if(s.length>0){s.css({marginTop:0-s.height()/2});s.appendTo(n.find(".esg-overflowtrick"))}if(o.length>0){o.css({marginTop:0-o.height()/2});o.appendTo(n.find(".esg-overflowtrick"))}punchgs.CSSPlugin.defaultTransformPerspective=1200;t.animSpeed=t.animSpeed/1e3;t.delayBasic=t.delayBasic/100;setOptions(n,t);t.filter=t.statfilter;t.origcolumn=t.column;t.currentpage=0;n.addClass("esg-layout-"+t.layout);var u=loadVideoApis(n,t);if(t.layout=="even"&&t.forceFullScreen=="on"){var a=jQuery(window).height();if(t.fullScreenOffsetContainer!=undefined){try{var f=t.fullScreenOffsetContainer.split(",");jQuery.each(f,function(e,n){a=a-jQuery(n).outerHeight(true);if(a<t.minFullScreenHeight)a=t.minFullScreenHeight})}catch(r){}}var l=n.find(".esg-overflowtrick").first();var c=n.find("ul").first();l.css({display:"block",height:a+"px"});c.css({display:"block",height:a+"px"})}function h(e,t){mainPreparing(e,t);t.initialised="ready";jQuery("body").trigger("essentialready",e.attr("id"))}if(t.googleFonts.length!=0&&t.layout=="masonry"){var p=t.googleFonts.length;var d=true;jQuery("head").find("*").each(function(){if(jQuery(this).attr("src")!=undefined&&jQuery(this).attr("src").indexOf("webfont.js")>0)d=false});if(WebFontConfig.active==undefined&&d){WebFontConfig={google:{families:t.googleFonts},active:function(){h(n,t)},inactive:function(){h(n,t)},timeout:1500};var v=document.createElement("script");v.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";v.type="text/javascript";v.async="true";var m=document.getElementsByTagName("script")[0];m.parentNode.insertBefore(v,m)}else{h(n,t)}}else{h(n,t)}if(t.loadMoreType=="button"){n.append('<div class="esg-loadmore-wrapper" style="text-align:center"><div class="esg-navigationbutton esg-loadmore">LOAD MORE</div></div>');var g=n.find(".esg-loadmore"),y=t.loadMoreTxt+" ("+checkMoreToLoad(n,t).length+")";if(t.loadMoreNr=="off")y=t.loadMoreTxt;g.html(y);g.click(function(){if(g.data("loading")!=1)loadMoreItems(n,t)})}else if(t.loadMoreType=="scroll"){n.append('<div style="display:inline-block" class="esg-navigationbutton esg-loadmore">LOAD MORE</div>');var g=n.find(".esg-loadmore"),y=t.loadMoreTxt+" ("+checkMoreToLoad(n,t).length+")";if(t.loadMoreNr=="off")y=t.loadMoreTxt;g.html(y);function b(e,n){var r=e.offset().top+e.height()-jQuery(document).scrollTop();if(jQuery(window).height()>r){if(n.data("loading")!=1){n.data("loading",1);loadMoreItems(e,t)}}}jQuery(document,window).scroll(function(){b(n,g)});b(n,g)}checkAvailableFilters(n,t);tabBlurringCheck(n,t)}})},esappend:function(e){var t=jQuery(this);prepareItemsInGrid(opt,true);organiseGrid(opt);prepareSortingAndOrders(t);return opt.lastslide},esskill:function(){var e=jQuery(this);e.find("*").each(function(){jQuery(this).off("click, focus, focusin, hover, play, ended, stop, pause, essentialready");jQuery(this).remove()});e.remove();e.html();e=null},esreadsettings:function(e){e=e==undefined?new Object:e;var t=jQuery(this);var n=getOptions(t);return n},esredraw:function(e){e=e==undefined?new Object:e;var t=jQuery(this);var n=getOptions(t);if(e.space!=undefined)n.space=parseInt(e.space,0);if(e.row!=undefined)n.row=parseInt(e.row,0);if(e.rtl!=undefined)n.rtl=e.rtl;if(e.aspectratio!=undefined)n.aspectratio=e.aspectratio;if(e.forceFullWidth!=undefined){n.forceFullWidth=e.forceFullWidth;if(n.forceFullWidth=="on"){var r=t.parent().parent().find(".esg-relative-placeholder").offset().left;t.closest(".esg-container-fullscreen-forcer").css({left:0-r,width:jQuery(window).width()})}else t.closest(".esg-container-fullscreen-forcer").css({left:0,width:"auto"})}if(e.rowItemMultiplier!=undefined)n.rowItemMultiplier=e.rowItemMultiplier;if(e.responsiveEntries!=undefined)n.responsiveEntries=e.responsiveEntries;if(e.column!=undefined){if(e.column<=0||e.column>=20){var i=getBestFitColumn(n,jQuery(window).width(),"id");n.column=i.column;n.columnindex=i.index}else{n.column=parseInt(e.column,0)}n.origcolumn=n.column}if(e.animSpeed!=undefined)n.animSpeed=e.animSpeed/1e3;if(e.delayBasic!=undefined)n.delayBasic=e.delayBasic/100;if(e.pageAnimation!=undefined)n.pageAnimation=e.pageAnimation;if(e.changedAnim!=undefined)n.changedAnim=e.changedAnim;n.started=true;if(e.silent==true)n.silent=true;setOptions(t,n);setItemsOnPages(n);organiseGrid(n)},esquickdraw:function(e){var t=jQuery(this);var n=getOptions(t);n.silent=true;setOptions(t,n);setItemsOnPages(n);organiseGrid(n)},esreinit:function(e){var t=jQuery(this);prepareItemsInGrid(opt,true);organiseGrid(opt);prepareSortingAndOrders(t);return opt.lastslide},somemethodb:function(e){return this.each(function(){var e=jQuery(this)})}});var vis=function(){var e,t,n={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in n){if(e in document){t=n[e];break}}return function(n){if(n)document.addEventListener(t,n);return!document[e]}}();var tabBlurringCheck=function(){var e=document.documentMode===undefined,t=window.chrome;if(!jQuery("body").hasClass("esg-blurlistenerexists")){jQuery("body").addClass("esg-blurlistenerexists");if(e&&!t){jQuery(window).on("focusin",function(){setTimeout(function(){jQuery("body").find(".esg-grid.esg-container").each(function(){jQuery(this).esquickdraw()})},300)}).on("focusout",function(){})}else{if(window.addEventListener){window.addEventListener("focus",function(e){setTimeout(function(){jQuery("body").find(".esg-grid.esg-container").each(function(){jQuery(this).esquickdraw()})},300)},false)}else{window.attachEvent("focus",function(e){setTimeout(function(){jQuery("body").find(".esg-grid.esg-container").each(function(){jQuery(this).esquickdraw()})},300)})}}}};var is_mobile=function(){var e=["android","webos","iphone","ipad","blackberry","Android","webos",,"iPod","iPhone","iPad","Blackberry","BlackBerry"];var t=false;for(i in e){if(navigator.userAgent.split(e[i]).length>1){t=true}}return t};var waitForLoads=function(e,t){var n=e.closest(".esg-grid").parent().parent().find(".esg-loader");jQuery.each(e,function(e,r){r=jQuery(r);if(n.length>0)punchgs.TweenLite.to(n,.2,{autoAlpha:1,delay:.5});if(!r.hasClass("loadedmedia")&&t.layout!="even"&&r.find("img").length>0)if(r.hasClass("itemtoshow"))r.removeClass("itemtoshow").addClass("showmeonload");if(!r.hasClass("loadedmedia")&&t.layout!="even"&&r.find("img").length==0){evenImageRatio(r.find("img"),t);waittorungGrid(r,t,true)}});var r=setInterval(function(){t.bannertimeronpause=true;t.cd=0;var i=0;e.find("img").each(function(e){var n=jQuery(this);if(n.data("lazydone")!=1&&t.lazyLoad=="on"&&n.parent().find(".lazyloadcover").length<1){n.parent().append('<div class="lazyloadcover" style="position:absolute;top:0px;left:0px;z-index:10;width:100%;height:100%;background:'+t.lazyLoadColor+'"></div>')}if(n.data("lazydone")!=1&&i<3){i++;loadAllPrepared(jQuery(this),t)}});if(i==0){if(n.length>0){punchgs.TweenLite.killTweensOf(n,false);punchgs.TweenLite.to(n,.2,{autoAlpha:0})}}if(i==0&&!e.closest(".mainul").hasClass("gridorganising")){clearInterval(r);runGrid(t)}},50)}})(jQuery);(function(e,t){"use strict";function p(e){return e&&e.toLowerCase?e.toLowerCase():e}function d(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]==t)return!n;return n}var n=!1,r=null,i=parseFloat,s=Math.min,o=/(-?\d+\.?\d*)$/g,u=/(\d+\.?\d*)$/g,a=[],f=[],l=function(e){return typeof e=="string"},c=function(e,t){var n=e.length,r=n,i;while(r--){i=n-r-1;t(e[i],i)}},h=Array.prototype.indexOf||function(e){var t=this.length,n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n);if(n<0)n+=t;for(;n<t;n++){if(n in this&&this[n]===e)return n}return-1};e.tinysort={id:"TinySort",version:"1.5.6",copyright:"Copyright (c) 2008-2013 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licensed:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},plugin:function(){var e=function(e,t){a.push(e);f.push(t)};e.indexOf=h;return e}(),defaults:{order:"asc",attr:r,data:r,useVal:n,place:"start",returns:n,cases:n,forceStrings:n,ignoreDashes:n,sortFunction:r}};e.fn.extend({tinysort:function(){var v,m,g,y=this,b=[],w=[],E=[],S=[],x=0,T,N=[],C=[],k=function(e){c(a,function(t){t.call(t,e)})},L=function(e,t){if(typeof t=="string"){if(!e.cases)t=p(t);t=t.replace(/^\s*(.*?)\s*$/i,"$1")}return t},A=function(e,t){var r=0;if(x!==0)x=0;while(r===0&&x<T){var s=S[x],a=s.oSettings,h=a.ignoreDashes?u:o;k(a);if(a.sortFunction){r=a.sortFunction(e,t)}else if(a.order=="rand"){r=Math.random()<.5?1:-1}else{var p=n,d=L(a,e.s[x]),v=L(a,t.s[x]);if(!a.forceStrings){var m=l(d)?d&&d.match(h):n,g=l(v)?v&&v.match(h):n;if(m&&g){var y=d.substr(0,d.length-m[0].length),b=v.substr(0,v.length-g[0].length);if(y==b){p=!n;d=i(m[0]);v=i(g[0])}}}r=s.iAsc*(d<v?-1:d>v?1:0)}c(f,function(e){r=e.call(e,p,d,v,r)});if(r===0)x++}return r};for(v=0,g=arguments.length;v<g;v++){var O=arguments[v];if(l(O)){if(N.push(O)-1>C.length)C.length=N.length-1}else{if(C.push(O)>N.length)N.length=C.length}}if(N.length>C.length)C.length=N.length;T=N.length;if(T===0){T=N.length=1;C.push({})}for(v=0,g=T;v<g;v++){var M=N[v],_=e.extend({},e.tinysort.defaults,C[v]),D=!(!M||M===""),P=D&&M[0]===":";S.push({sFind:M,oSettings:_,bFind:D,bAttr:!(_.attr===r||_.attr===""),bData:_.data!==r,bFilter:P,$Filter:P?y.filter(M):y,fnSort:_.sortFunction,iAsc:_.order=="asc"?1:-1})}y.each(function(n,r){var i=e(r),s=i.parent().get(0),o,u=[];for(m=0;m<T;m++){var a=S[m],f=a.bFind?a.bFilter?a.$Filter.filter(r):i.find(a.sFind):i;u.push(a.bData?f.data(a.oSettings.data):a.bAttr?f.attr(a.oSettings.attr):a.oSettings.useVal?f.val():f.text());if(o===t)o=f}var l=h.call(E,s);if(l<0){l=E.push(s)-1;w[l]={s:[],n:[]}}if(o.length>0)w[l].s.push({s:u,e:i,n:n});else w[l].n.push({e:i,n:n})});c(w,function(e){e.s.sort(A)});c(w,function(e){var t=e.s,r=e.n,i=t.length,o=r.length,u=i+o,a=[],f=u,l=[0,0];switch(_.place){case"first":c(t,function(e){f=s(f,e.n)});break;case"org":c(t,function(e){a.push(e.n)});break;case"end":f=o;break;default:f=0}for(v=0;v<u;v++){var h=d(a,v)?!n:v>=f&&v<f+i,p=h?0:1,m=(h?t:r)[l[p]].e;m.parent().append(m);if(h||!_.returns)b.push(m.get(0));l[p]++}});y.length=0;Array.prototype.push.apply(y,b);return y}});e.fn.TinySort=e.fn.Tinysort=e.fn.tsort=e.fn.tinysort})(jQuery)